<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Trợ Lý Quảng Cáo — Genztech</title>
  <link rel="stylesheet" href="css/main.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <style>
    html,body{scrollbar-width:none;-ms-overflow-style:none;cursor:none}
    html::-webkit-scrollbar,body::-webkit-scrollbar{display:none;width:0}
    .app-layout{display:flex;min-height:100vh}
    .sidebar{width:260px;flex-shrink:0;background:rgba(10,14,39,.85);backdrop-filter:blur(20px);border-right:1px solid rgba(255,255,255,.06);display:flex;flex-direction:column;position:fixed;top:0;left:0;bottom:0;z-index:40}
    .sidebar-logo{padding:20px 20px 16px;border-bottom:1px solid rgba(255,255,255,.06);display:flex;align-items:center;gap:10px;text-decoration:none}
    .sidebar-logo img{width:36px;height:36px;border-radius:50%}
    .sidebar-logo span{font-size:15px;font-weight:700;letter-spacing:.5px;color:#fff}
    .sidebar-logo span em{color:#00d4ff;font-style:normal}
    .sidebar-nav{flex:1;padding:12px 0;overflow-y:auto}
    .nav-group-label{font-size:10px;font-weight:600;letter-spacing:1.2px;color:rgba(255,255,255,.3);text-transform:uppercase;padding:12px 20px 4px}
    .nav-item{display:flex;align-items:center;gap:10px;padding:10px 20px;font-size:13.5px;color:rgba(255,255,255,.6);text-decoration:none;transition:all .2s;border-left:2px solid transparent}
    .nav-item:hover{color:#fff;background:rgba(255,255,255,.04)}
    .nav-item.active{color:#00d4ff;background:rgba(0,212,255,.08);border-left-color:#00d4ff}
    .nav-item i{width:18px;text-align:center;font-size:15px}
    .nav-sub{padding-left:20px}
    .nav-sub .nav-item{font-size:12.5px;padding:7px 20px}
    .sidebar-footer{padding:16px 20px;border-top:1px solid rgba(255,255,255,.06)}
    .main-content{margin-left:260px;flex:1;display:flex;flex-direction:column;min-height:100vh}
    .topbar{position:sticky;top:0;z-index:30;background:rgba(10,14,39,.85);backdrop-filter:blur(20px);border-bottom:1px solid rgba(255,255,255,.06);padding:0 28px;height:64px;display:flex;align-items:center;justify-content:space-between}
    .breadcrumb{font-size:13px;color:rgba(255,255,255,.4);display:flex;align-items:center;gap:6px}
    .breadcrumb span{color:#fff;font-weight:600}
    .btn-sm{padding:7px 16px;border-radius:8px;font-size:13px;font-weight:600;border:none;cursor:pointer;transition:all .2s;display:flex;align-items:center;gap:6px}
    .btn-primary{background:#1877f2;color:#fff}
    .btn-primary:hover{background:#1565d8;transform:translateY(-1px)}
    .btn-outline{background:transparent;color:rgba(255,255,255,.7);border:1px solid rgba(255,255,255,.15)}
    .btn-outline:hover{border-color:#00d4ff;color:#00d4ff}
    .page-body{padding:28px;flex:1}
    .page-title{font-size:22px;font-weight:700;margin-bottom:4px}
    .page-subtitle{font-size:13px;color:rgba(255,255,255,.45);margin-bottom:28px}
    /* Tool cards grid */
    .tools-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:20px}
    @media(max-width:1200px){.tools-grid{grid-template-columns:repeat(2,1fr)}}
    @media(max-width:768px){.tools-grid{grid-template-columns:1fr};.sidebar{display:none};.main-content{margin-left:0}}
    .tool-card{
      background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.07);
      border-radius:16px;overflow:hidden;transition:all .25s;cursor:pointer;
      text-decoration:none;display:flex;flex-direction:column;
    }
    .tool-card:hover{transform:translateY(-4px);box-shadow:0 12px 40px rgba(0,0,0,.3)}
    .tool-card-banner{height:6px}
    .tool-card-body{padding:22px;flex:1}
    .tool-icon-wrap{width:52px;height:52px;border-radius:14px;display:flex;align-items:center;justify-content:center;font-size:24px;margin-bottom:14px}
    .tool-name{font-size:15px;font-weight:700;margin-bottom:6px;color:#fff}
    .tool-desc{font-size:12.5px;color:rgba(255,255,255,.45);line-height:1.6;margin-bottom:14px}
    .tool-features{display:flex;flex-wrap:wrap;gap:5px;margin-bottom:16px}
    .feature-tag{font-size:10.5px;padding:3px 9px;border-radius:20px;font-weight:600}
    .tool-card-footer{padding:14px 22px;border-top:1px solid rgba(255,255,255,.05);display:flex;align-items:center;justify-content:space-between}
    .tool-status{font-size:11px;color:rgba(255,255,255,.35);display:flex;align-items:center;gap:5px}
    .status-dot{width:6px;height:6px;border-radius:50%;background:#22c55e}
    .open-btn{font-size:12px;padding:6px 14px;border-radius:7px;border:none;cursor:pointer;font-weight:600;transition:all .2s;display:flex;align-items:center;gap:5px}
    /* Toast */
    .toast-container{position:fixed;bottom:24px;right:24px;z-index:999;display:flex;flex-direction:column;gap:8px}
    .toast{background:#1e293b;border:1px solid rgba(255,255,255,.1);border-radius:10px;padding:12px 16px;font-size:13px;display:flex;align-items:center;gap:10px;min-width:260px;animation:slideIn .3s ease;box-shadow:0 8px 24px rgba(0,0,0,.4);transition:opacity .3s}
    .toast.success{border-left:3px solid #22c55e}
    .toast.error{border-left:3px solid #ef4444}
    .toast.info{border-left:3px solid #60a5fa}
    @keyframes slideIn{from{transform:translateX(100%);opacity:0}to{transform:translateX(0);opacity:1}}
    /* FB status bar */
    .fb-status-bar{background:rgba(24,119,242,.08);border:1px solid rgba(24,119,242,.2);border-radius:12px;padding:14px 18px;margin-bottom:24px;display:flex;align-items:center;justify-content:space-between}
    .fb-status-left{display:flex;align-items:center;gap:10px;font-size:13px}
    .fb-dot{width:8px;height:8px;border-radius:50%;flex-shrink:0}
    .fb-dot.connected{background:#22c55e;box-shadow:0 0 8px #22c55e}
    .fb-dot.disconnected{background:#ef4444}
  </style>
</head>
<body class="bg-space-black text-white antialiased overflow-x-hidden">
  <canvas id="starfield-far"  class="fixed inset-0 pointer-events-none z-0"></canvas>
  <canvas id="starfield-mid"  class="fixed inset-0 pointer-events-none z-1"></canvas>
  <canvas id="starfield-near" class="fixed inset-0 pointer-events-none z-2"></canvas>
  <canvas id="constellation-lines" class="fixed inset-0 pointer-events-none z-3"></canvas>
  <canvas id="data-particles" class="fixed inset-0 pointer-events-none z-4"></canvas>
  <div class="fixed inset-0 pointer-events-none z-5 opacity-30"><div class="cosmic-fog"></div></div>
  <div id="custom-cursor" class="fixed pointer-events-none z-[100] opacity-0 transition-opacity duration-200 flex items-center justify-center transform -translate-x-1/2 -translate-y-1/2 will-change-transform">
    <img src="images/logo.png" alt="" class="w-10 h-10 object-cover rounded-full filter drop-shadow-[0_0_8px_rgba(0,212,255,0.8)] pointer-events-none">
  </div>
  <div class="toast-container" id="toastContainer"></div>

  <div class="app-layout relative z-10">
    <aside class="sidebar">
      <a href="index.html" class="sidebar-logo">
        <img src="images/logo.png" alt="Logo">
        <span>GENZ<em>TECH</em></span>
      </a>
      <nav class="sidebar-nav">
        <div class="nav-group-label">Tổng quan</div>
        <a href="index.html" class="nav-item"><i class="bi bi-grid-1x2"></i> Dashboard</a>
        <div class="nav-group-label">Công cụ</div>
        <a href="auto-post.html" class="nav-item"><i class="bi bi-send-fill"></i> Tự Động Đăng Bài</a>
        <a href="ads-assistant.html" class="nav-item active"><i class="bi bi-robot"></i> Trợ Lý Quảng Cáo</a>
        <div class="nav-sub">
          <a href="tool-ad-account.html" class="nav-item"><i class="bi bi-shield-check"></i> Kiểm Tra TKQC</a>
          <a href="tool-fb-id.html" class="nav-item"><i class="bi bi-person-badge"></i> Tìm Facebook ID</a>
          <a href="tool-budget.html" class="nav-item"><i class="bi bi-graph-up-arrow"></i> Phân Tích Ngân Sách</a>
          <a href="tool-translate.html" class="nav-item"><i class="bi bi-translate"></i> Dịch Thuật</a>
          <a href="tool-ads-finder.html" class="nav-item"><i class="bi bi-binoculars"></i> Ads Finder</a>
          <a href="tool-policy.html" class="nav-item"><i class="bi bi-journal-text"></i> Chính Sách FB</a>
          <a href="tool-cookie.html" class="nav-item"><i class="bi bi-cookie"></i> Quản Lý Cookie</a>
        </div>
        <div class="nav-group-label">Hệ thống</div>
        <a href="#" class="nav-item"><i class="bi bi-gear"></i> Cài Đặt</a>
      </nav>
      <div class="sidebar-footer">
        <div style="font-size:11px;color:rgba(255,255,255,.3)"><i class="bi bi-shield-check" style="color:#22c55e"></i> Genztech Platform v2.0</div>
      </div>
    </aside>

    <div class="main-content">
      <header class="topbar">
        <div class="breadcrumb">
          <i class="bi bi-house"></i>
          <i class="bi bi-chevron-right" style="font-size:10px"></i>
          <span>Trợ Lý Quảng Cáo</span>
        </div>
        <div style="display:flex;gap:10px">
          <a href="auto-post.html" class="btn-sm btn-outline"><i class="bi bi-send-fill"></i> Đăng Bài</a>
        </div>
      </header>

      <main class="page-body">
        <h1 class="page-title"><i class="bi bi-robot" style="color:#00d4ff"></i> Trợ Lý Quảng Cáo</h1>
        <p class="page-subtitle">7 công cụ chuyên nghiệp hỗ trợ nhà quảng cáo Facebook — phân tích, tối ưu và quản lý chiến dịch hiệu quả</p>

        <!-- FB Status -->
        <div class="fb-status-bar" id="fbStatusBar">
          <div class="fb-status-left">
            <div class="fb-dot" id="fbStatusDot"></div>
            <span id="fbStatusText">Đang kiểm tra kết nối Facebook...</span>
          </div>
          <a href="auto-post.html" class="btn-sm btn-primary" id="fbConnectBtn" style="display:none">
            <i class="bi bi-facebook"></i> Kết Nối Facebook
          </a>
        </div>

        <!-- Tools Grid -->
        <div class="tools-grid">

          <!-- 1. Kiểm Tra TKQC -->
          <a href="tool-ad-account.html" class="tool-card">
            <div class="tool-card-banner" style="background:linear-gradient(90deg,#1877f2,#00d4ff)"></div>
            <div class="tool-card-body">
              <div class="tool-icon-wrap" style="background:rgba(24,119,242,.15)"><i class="bi bi-shield-check" style="color:#60a5fa"></i></div>
              <div class="tool-name">Kiểm Tra Tài Khoản QC</div>
              <div class="tool-desc">Xem đầy đủ thông tin tài khoản quảng cáo: trạng thái, số dư, ngưỡng chi tiêu, lịch sử giao dịch và cảnh báo rủi ro</div>
              <div class="tool-features">
                <span class="feature-tag" style="background:rgba(24,119,242,.15);color:#60a5fa">Trạng thái TKQC</span>
                <span class="feature-tag" style="background:rgba(34,197,94,.12);color:#4ade80">Số dư & ngưỡng</span>
                <span class="feature-tag" style="background:rgba(251,191,36,.12);color:#fbbf24">Lịch sử chi tiêu</span>
                <span class="feature-tag" style="background:rgba(239,68,68,.12);color:#f87171">Cảnh báo rủi ro</span>
              </div>
            </div>
            <div class="tool-card-footer">
              <div class="tool-status"><div class="status-dot"></div> Facebook Graph API</div>
              <button class="open-btn" style="background:rgba(24,119,242,.2);color:#60a5fa">Mở <i class="bi bi-arrow-right"></i></button>
            </div>
          </a>

          <!-- 2. Tìm Facebook ID -->
          <a href="tool-fb-id.html" class="tool-card">
            <div class="tool-card-banner" style="background:linear-gradient(90deg,#0ea5e9,#38bdf8)"></div>
            <div class="tool-card-body">
              <div class="tool-icon-wrap" style="background:rgba(14,165,233,.15)"><i class="bi bi-person-badge" style="color:#38bdf8"></i></div>
              <div class="tool-name">Tìm Facebook ID</div>
              <div class="tool-desc">Tra cứu UID của tài khoản, Page, Group qua link hoặc username. Hỗ trợ tra hàng loạt và lưu lịch sử tìm kiếm</div>
              <div class="tool-features">
                <span class="feature-tag" style="background:rgba(14,165,233,.15);color:#38bdf8">Tra cứu đơn lẻ</span>
                <span class="feature-tag" style="background:rgba(14,165,233,.12);color:#7dd3fc">Tra hàng loạt</span>
                <span class="feature-tag" style="background:rgba(34,197,94,.12);color:#4ade80">Lịch sử tìm kiếm</span>
              </div>
            </div>
            <div class="tool-card-footer">
              <div class="tool-status"><div class="status-dot"></div> Facebook Graph API</div>
              <button class="open-btn" style="background:rgba(14,165,233,.2);color:#38bdf8">Mở <i class="bi bi-arrow-right"></i></button>
            </div>
          </a>

          <!-- 3. Phân Tích Ngân Sách -->
          <a href="tool-budget.html" class="tool-card">
            <div class="tool-card-banner" style="background:linear-gradient(90deg,#22c55e,#4ade80)"></div>
            <div class="tool-card-body">
              <div class="tool-icon-wrap" style="background:rgba(34,197,94,.15)"><i class="bi bi-graph-up-arrow" style="color:#4ade80"></i></div>
              <div class="tool-name">Phân Tích Ngân Sách</div>
              <div class="tool-desc">Tính toán và tối ưu ngân sách quảng cáo theo ROAS, CPA, CPM. Dự báo kết quả và đề xuất phân bổ ngân sách tối ưu</div>
              <div class="tool-features">
                <span class="feature-tag" style="background:rgba(34,197,94,.15);color:#4ade80">Tính ROAS/CPA</span>
                <span class="feature-tag" style="background:rgba(34,197,94,.12);color:#86efac">Dự báo kết quả</span>
                <span class="feature-tag" style="background:rgba(251,191,36,.12);color:#fbbf24">Tối ưu phân bổ</span>
              </div>
            </div>
            <div class="tool-card-footer">
              <div class="tool-status"><div class="status-dot"></div> Tính toán nội bộ</div>
              <button class="open-btn" style="background:rgba(34,197,94,.2);color:#4ade80">Mở <i class="bi bi-arrow-right"></i></button>
            </div>
          </a>

          <!-- 4. Dịch Thuật -->
          <a href="tool-translate.html" class="tool-card">
            <div class="tool-card-banner" style="background:linear-gradient(90deg,#7c3aed,#a855f7)"></div>
            <div class="tool-card-body">
              <div class="tool-icon-wrap" style="background:rgba(124,58,237,.15)"><i class="bi bi-translate" style="color:#c084fc"></i></div>
              <div class="tool-name">Dịch Thuật Hội Thoại</div>
              <div class="tool-desc">Dịch tin nhắn khách hàng, nội dung quảng cáo đa ngôn ngữ với AI. Hỗ trợ 8 ngôn ngữ Đông Nam Á và quốc tế</div>
              <div class="tool-features">
                <span class="feature-tag" style="background:rgba(124,58,237,.15);color:#c084fc">8 ngôn ngữ</span>
                <span class="feature-tag" style="background:rgba(124,58,237,.12);color:#d8b4fe">Dịch hàng loạt</span>
                <span class="feature-tag" style="background:rgba(34,197,94,.12);color:#4ade80">AI tối ưu</span>
              </div>
            </div>
            <div class="tool-card-footer">
              <div class="tool-status"><div class="status-dot"></div> Google Translate API</div>
              <button class="open-btn" style="background:rgba(124,58,237,.2);color:#c084fc">Mở <i class="bi bi-arrow-right"></i></button>
            </div>
          </a>

          <!-- 5. Ads Finder -->
          <a href="tool-ads-finder.html" class="tool-card">
            <div class="tool-card-banner" style="background:linear-gradient(90deg,#ea580c,#f97316)"></div>
            <div class="tool-card-body">
              <div class="tool-icon-wrap" style="background:rgba(234,88,12,.15)"><i class="bi bi-binoculars" style="color:#fb923c"></i></div>
              <div class="tool-name">Ads Finder</div>
              <div class="tool-desc">Tìm kiếm và phân tích quảng cáo đang chạy trên Facebook Ad Library. Lưu, phân loại và theo dõi quảng cáo đối thủ</div>
              <div class="tool-features">
                <span class="feature-tag" style="background:rgba(234,88,12,.15);color:#fb923c">Ad Library API</span>
                <span class="feature-tag" style="background:rgba(234,88,12,.12);color:#fdba74">Lưu & phân loại</span>
                <span class="feature-tag" style="background:rgba(251,191,36,.12);color:#fbbf24">Theo dõi đối thủ</span>
              </div>
            </div>
            <div class="tool-card-footer">
              <div class="tool-status"><div class="status-dot"></div> Facebook Ad Library</div>
              <button class="open-btn" style="background:rgba(234,88,12,.2);color:#fb923c">Mở <i class="bi bi-arrow-right"></i></button>
            </div>
          </a>

          <!-- 6. Chính Sách Facebook -->
          <a href="tool-policy.html" class="tool-card">
            <div class="tool-card-banner" style="background:linear-gradient(90deg,#f59e0b,#fbbf24)"></div>
            <div class="tool-card-body">
              <div class="tool-icon-wrap" style="background:rgba(245,158,11,.15)"><i class="bi bi-journal-text" style="color:#fbbf24"></i></div>
              <div class="tool-name">Chính Sách Facebook</div>
              <div class="tool-desc">Cập nhật mới nhất về chính sách quảng cáo Meta. Kiểm tra nội dung vi phạm và nhận gợi ý sửa chữa bằng AI</div>
              <div class="tool-features">
                <span class="feature-tag" style="background:rgba(245,158,11,.15);color:#fbbf24">Chính sách mới nhất</span>
                <span class="feature-tag" style="background:rgba(239,68,68,.12);color:#f87171">Phát hiện vi phạm</span>
                <span class="feature-tag" style="background:rgba(34,197,94,.12);color:#4ade80">AI gợi ý sửa</span>
              </div>
            </div>
            <div class="tool-card-footer">
              <div class="tool-status"><div class="status-dot"></div> Cập nhật liên tục</div>
              <button class="open-btn" style="background:rgba(245,158,11,.2);color:#fbbf24">Mở <i class="bi bi-arrow-right"></i></button>
            </div>
          </a>

          <!-- 7. Quản Lý Cookie -->
          <a href="tool-cookie.html" class="tool-card">
            <div class="tool-card-banner" style="background:linear-gradient(90deg,#ef4444,#f87171)"></div>
            <div class="tool-card-body">
              <div class="tool-icon-wrap" style="background:rgba(239,68,68,.15)"><i class="bi bi-cookie" style="color:#f87171"></i></div>
              <div class="tool-name">Quản Lý Cookie</div>
              <div class="tool-desc">Lưu trữ và chuyển đổi nhanh giữa các phiên đăng nhập Facebook. Kiểm tra trạng thái cookie và xuất/nhập hàng loạt</div>
              <div class="tool-features">
                <span class="feature-tag" style="background:rgba(239,68,68,.15);color:#f87171">Lưu phiên đăng nhập</span>
                <span class="feature-tag" style="background:rgba(239,68,68,.12);color:#fca5a5">Kiểm tra trạng thái</span>
                <span class="feature-tag" style="background:rgba(251,191,36,.12);color:#fbbf24">Xuất/nhập JSON</span>
              </div>
            </div>
            <div class="tool-card-footer">
              <div class="tool-status"><div class="status-dot"></div> Lưu trữ cục bộ</div>
              <button class="open-btn" style="background:rgba(239,68,68,.2);color:#f87171">Mở <i class="bi bi-arrow-right"></i></button>
            </div>
          </a>

        </div>
      </main>
    </div>
  </div>

  <script src="js/ads-shared.js"></script>
  <script>
  // FB status check
  document.addEventListener('DOMContentLoaded', () => {
    const dot = document.getElementById('fbStatusDot');
    const text = document.getElementById('fbStatusText');
    const btn = document.getElementById('fbConnectBtn');
    if (GZ.isFbConnected()) {
      dot.classList.add('connected');
      const pages = GZ.getFbPages();
      text.textContent = `Đã kết nối Facebook — ${pages.length} page sẵn sàng`;
    } else {
      dot.classList.add('disconnected');
      text.textContent = 'Chưa kết nối Facebook — Một số công cụ cần kết nối để hoạt động';
      btn.style.display = 'flex';
    }
  });
  </script>
  <script>
  // Background & cursor (shared)
  const isMobile = window.innerWidth < 768;
  const isTouchDevice = ('ontouchstart' in window);
  const cursor = document.getElementById('custom-cursor');
  if (!isTouchDevice && cursor) {
    let moving = false;
    document.addEventListener('mousemove', e => {
      cursor.style.left = e.clientX + 'px'; cursor.style.top = e.clientY + 'px';
      if (!moving) { cursor.style.opacity = '1'; moving = true; }
    });
    document.addEventListener('mouseleave', () => { cursor.style.opacity = '0'; moving = false; });
  }
  const canvasFar = document.getElementById('starfield-far');
  const canvasMid = document.getElementById('starfield-mid');
  const canvasNear = document.getElementById('starfield-near');
  [canvasFar, canvasMid, canvasNear].forEach(c => { c.width = window.innerWidth; c.height = window.innerHeight; });
  window.addEventListener('resize', () => { [canvasFar, canvasMid, canvasNear].forEach(c => { c.width = window.innerWidth; c.height = window.innerHeight; }); });
  const ctxFar = canvasFar.getContext('2d'), ctxMid = canvasMid.getContext('2d'), ctxNear = canvasNear.getContext('2d');
  const starsFar = Array.from({length: isMobile?60:120}, () => ({ x: Math.random()*canvasFar.width, y: Math.random()*canvasFar.height, r: Math.random()*1+.3, o: Math.random()*.5+.1 }));
  const starsMid = Array.from({length: isMobile?30:60}, () => ({ x: Math.random()*canvasMid.width, y: Math.random()*canvasMid.height, r: Math.random()*1.5+.5, o: Math.random()*.4+.1, vx: (Math.random()-.5)*.15, vy: (Math.random()-.5)*.15 }));
  const starsNear = Array.from({length: isMobile?15:30}, () => ({ x: Math.random()*canvasNear.width, y: Math.random()*canvasNear.height, r: Math.random()*2+1, o: Math.random()*.6+.2, vx: (Math.random()-.5)*.3, vy: (Math.random()-.5)*.3, p: Math.random()*Math.PI*2 }));
  const ss = []; let lastSST = 0;
  function SS() { this.reset = () => { this.x=Math.random()*canvasFar.width*.7; this.y=Math.random()*canvasFar.height*.3; this.len=Math.random()*80+40; this.spd=Math.random()*4+2; this.sz=Math.random()*1.5+.5; this.vx=this.spd; this.vy=this.spd*.5; this.op=0; this.life=0; this.maxLife=200; this.active=true; }; this.update=()=>{ this.x+=this.vx; this.y+=this.vy; this.life++; if(this.life<20)this.op=this.life/20; else if(this.life>this.maxLife-40)this.op=(this.maxLife-this.life)/40; else this.op=1; if(this.life>=this.maxLife||this.x>canvasFar.width+300)this.active=false; }; this.draw=ctx=>{ if(!this.active)return; const tx=this.x-this.vx*(this.len/this.spd),ty=this.y-this.vy*(this.len/this.spd); const g=ctx.createLinearGradient(this.x,this.y,tx,ty); g.addColorStop(0,'rgba(255,255,255,'+this.op+')'); g.addColorStop(1,'rgba(255,255,255,0)'); ctx.strokeStyle=g; ctx.lineWidth=this.sz; ctx.lineCap='round'; ctx.beginPath(); ctx.moveTo(this.x,this.y); ctx.lineTo(tx,ty); ctx.stroke(); }; this.reset(); }
  function anim() {
    ctxFar.clearRect(0,0,canvasFar.width,canvasFar.height);
    starsFar.forEach(s=>{ ctxFar.fillStyle='rgba(255,255,255,'+s.o+')'; ctxFar.beginPath(); ctxFar.arc(s.x,s.y,s.r,0,Math.PI*2); ctxFar.fill(); });
    const now=Date.now(); if(now-lastSST>Math.random()*1000+500&&ss.length<5){ ss.push(new SS()); lastSST=now; }
    ctxMid.clearRect(0,0,canvasMid.width,canvasMid.height);
    for(let i=ss.length-1;i>=0;i--){ ss[i].update(); ss[i].draw(ctxMid); if(!ss[i].active)ss.splice(i,1); }
    starsMid.forEach(s=>{ s.x+=s.vx; s.y+=s.vy; if(s.x<0)s.x=canvasMid.width; if(s.x>canvasMid.width)s.x=0; if(s.y<0)s.y=canvasMid.height; if(s.y>canvasMid.height)s.y=0; ctxMid.fillStyle='rgba(255,255,255,'+s.o+')'; ctxMid.beginPath(); ctxMid.arc(s.x,s.y,s.r,0,Math.PI*2); ctxMid.fill(); });
    ctxNear.clearRect(0,0,canvasNear.width,canvasNear.height);
    starsNear.forEach(s=>{ s.x+=s.vx; s.y+=s.vy; s.p+=.02; if(s.x<0)s.x=canvasNear.width; if(s.x>canvasNear.width)s.x=0; if(s.y<0)s.y=canvasNear.height; if(s.y>canvasNear.height)s.y=0; const po=s.o*(0.7+Math.sin(s.p)*.3); const g=ctxNear.createRadialGradient(s.x,s.y,0,s.x,s.y,s.r*3); g.addColorStop(0,'rgba(24,119,242,'+po+')'); g.addColorStop(.5,'rgba(0,212,255,'+(po*.5)+')'); g.addColorStop(1,'rgba(0,212,255,0)'); ctxNear.fillStyle=g; ctxNear.beginPath(); ctxNear.arc(s.x,s.y,s.r*3,0,Math.PI*2); ctxNear.fill(); });
    requestAnimationFrame(anim);
  }
  anim();
  </script>
</body>
</html>
