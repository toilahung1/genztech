<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ki·ªÉm Tra TKQC ‚Äî Genztech</title>
  <link rel="stylesheet" href="css/main.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <style>
    html,body{scrollbar-width:none;-ms-overflow-style:none;cursor:none}
    html::-webkit-scrollbar,body::-webkit-scrollbar{display:none;width:0}
    .app-layout{display:flex;min-height:100vh}
    .sidebar{width:260px;flex-shrink:0;background:rgba(10,14,39,.85);backdrop-filter:blur(20px);border-right:1px solid rgba(255,255,255,.06);display:flex;flex-direction:column;position:fixed;top:0;left:0;bottom:0;z-index:40}
    .sidebar-logo{padding:20px 20px 16px;border-bottom:1px solid rgba(255,255,255,.06);display:flex;align-items:center;gap:10px;text-decoration:none}
    .sidebar-logo img{width:36px;height:36px;border-radius:50%}
    .sidebar-logo span{font-size:15px;font-weight:700;letter-spacing:.5px;color:#fff}
    .sidebar-logo span em{color:#00d4ff;font-style:normal}
    .sidebar-nav{flex:1;padding:12px 0;overflow-y:auto}
    .nav-group-label{font-size:10px;font-weight:600;letter-spacing:1.2px;color:rgba(255,255,255,.3);text-transform:uppercase;padding:12px 20px 4px}
    .nav-item{display:flex;align-items:center;gap:10px;padding:10px 20px;font-size:13.5px;color:rgba(255,255,255,.6);text-decoration:none;transition:all .2s;border-left:2px solid transparent}
    .nav-item:hover{color:#fff;background:rgba(255,255,255,.04)}
    .nav-item.active{color:#00d4ff;background:rgba(0,212,255,.08);border-left-color:#00d4ff}
    .nav-item i{width:18px;text-align:center;font-size:15px}
    .nav-sub .nav-item{font-size:12.5px;padding:7px 20px 7px 36px}
    .main-content{margin-left:260px;flex:1;display:flex;flex-direction:column;min-height:100vh}
    .topbar{position:sticky;top:0;z-index:30;background:rgba(10,14,39,.85);backdrop-filter:blur(20px);border-bottom:1px solid rgba(255,255,255,.06);padding:0 28px;height:64px;display:flex;align-items:center;justify-content:space-between}
    .breadcrumb{font-size:13px;color:rgba(255,255,255,.4);display:flex;align-items:center;gap:6px}
    .breadcrumb span{color:#fff;font-weight:600}
    .btn-sm{padding:7px 16px;border-radius:8px;font-size:13px;font-weight:600;border:none;cursor:pointer;transition:all .2s;display:flex;align-items:center;gap:6px}
    .btn-primary{background:#1877f2;color:#fff}
    .btn-primary:hover{background:#1565d8;transform:translateY(-1px)}
    .btn-outline{background:transparent;color:rgba(255,255,255,.7);border:1px solid rgba(255,255,255,.15)}
    .btn-outline:hover{border-color:#00d4ff;color:#00d4ff}
    .btn-success{background:#22c55e;color:#fff}
    .btn-success:hover{background:#16a34a}
    .btn-danger{background:#ef4444;color:#fff}
    .page-body{padding:28px;flex:1}
    .page-title{font-size:22px;font-weight:700;margin-bottom:4px}
    .page-subtitle{font-size:13px;color:rgba(255,255,255,.45);margin-bottom:24px}
    .card{background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.07);border-radius:14px;overflow:hidden;margin-bottom:20px}
    .card-header{padding:16px 20px;border-bottom:1px solid rgba(255,255,255,.06);display:flex;align-items:center;justify-content:space-between}
    .card-title{font-size:14px;font-weight:700;display:flex;align-items:center;gap:8px}
    .card-title i{color:#00d4ff}
    .card-body{padding:20px}
    .form-group{margin-bottom:16px}
    .form-label{font-size:12px;font-weight:600;color:rgba(255,255,255,.6);margin-bottom:6px;display:block}
    .form-control{width:100%;background:rgba(0,0,0,.3);border:1px solid rgba(255,255,255,.1);border-radius:8px;padding:10px 14px;color:#fff;font-size:13.5px;transition:border-color .2s;box-sizing:border-box;font-family:inherit}
    .form-control:focus{outline:none;border-color:#1877f2}
    .form-control::placeholder{color:rgba(255,255,255,.25)}
    select.form-control{cursor:pointer}
    .grid-2{display:grid;grid-template-columns:1fr 1fr;gap:20px}
    .grid-3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:16px}
    .grid-4{display:grid;grid-template-columns:repeat(4,1fr);gap:14px}
    @media(max-width:1024px){.grid-4{grid-template-columns:repeat(2,1fr)}.grid-3{grid-template-columns:1fr 1fr}}
    .stat-card{background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.07);border-radius:12px;padding:16px 18px}
    .stat-label{font-size:11px;color:rgba(255,255,255,.4);margin-bottom:6px;text-transform:uppercase;letter-spacing:.8px}
    .stat-value{font-size:22px;font-weight:700;line-height:1}
    .stat-sub{font-size:11px;color:rgba(255,255,255,.35);margin-top:4px}
    .info-row{display:flex;align-items:center;justify-content:space-between;padding:10px 0;border-bottom:1px solid rgba(255,255,255,.05);font-size:13px}
    .info-row:last-child{border-bottom:none}
    .info-key{color:rgba(255,255,255,.45)}
    .info-val{color:#fff;font-weight:600}
    .badge{display:inline-flex;align-items:center;gap:4px;padding:3px 10px;border-radius:20px;font-size:11.5px;font-weight:600}
    .badge-green{background:rgba(34,197,94,.15);color:#4ade80;border:1px solid rgba(34,197,94,.3)}
    .badge-red{background:rgba(239,68,68,.15);color:#f87171;border:1px solid rgba(239,68,68,.3)}
    .badge-yellow{background:rgba(251,191,36,.15);color:#fbbf24;border:1px solid rgba(251,191,36,.3)}
    .badge-blue{background:rgba(24,119,242,.15);color:#60a5fa;border:1px solid rgba(24,119,242,.3)}
    .badge-gray{background:rgba(255,255,255,.08);color:rgba(255,255,255,.5);border:1px solid rgba(255,255,255,.1)}
    .spinner{display:inline-block;width:14px;height:14px;border:2px solid rgba(255,255,255,.2);border-top-color:#00d4ff;border-radius:50%;animation:spin .6s linear infinite}
    @keyframes spin{to{transform:rotate(360deg)}}
    .toast-container{position:fixed;bottom:24px;right:24px;z-index:999;display:flex;flex-direction:column;gap:8px}
    .toast{background:#1e293b;border:1px solid rgba(255,255,255,.1);border-radius:10px;padding:12px 16px;font-size:13px;display:flex;align-items:center;gap:10px;min-width:260px;animation:slideIn .3s ease;box-shadow:0 8px 24px rgba(0,0,0,.4);transition:opacity .3s}
    .toast.success{border-left:3px solid #22c55e}
    .toast.error{border-left:3px solid #ef4444}
    .toast.info{border-left:3px solid #60a5fa}
    @keyframes slideIn{from{transform:translateX(100%);opacity:0}to{transform:translateX(0);opacity:1}}
    .progress-wrap{background:rgba(255,255,255,.08);border-radius:4px;height:8px;overflow:hidden;margin-top:6px}
    .progress-bar{height:100%;border-radius:4px;transition:width .8s ease}
    .empty-state{text-align:center;padding:40px 20px;color:rgba(255,255,255,.3)}
    .empty-state i{font-size:40px;margin-bottom:12px;display:block}
    .empty-state p{font-size:13px}
    .risk-item{background:rgba(0,0,0,.2);border-radius:10px;padding:12px 14px;margin-bottom:8px;display:flex;align-items:flex-start;gap:10px}
    .risk-icon{font-size:18px;flex-shrink:0;margin-top:1px}
    .risk-title{font-size:13px;font-weight:700;margin-bottom:3px}
    .risk-desc{font-size:12px;color:rgba(255,255,255,.5);line-height:1.5}
    .campaign-row{background:rgba(0,0,0,.2);border:1px solid rgba(255,255,255,.06);border-radius:10px;padding:12px 14px;margin-bottom:8px}
    .campaign-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
    .campaign-name{font-size:13px;font-weight:700}
    .campaign-metrics{display:grid;grid-template-columns:repeat(4,1fr);gap:8px;margin-top:8px}
    .metric-box{background:rgba(255,255,255,.04);border-radius:7px;padding:8px;text-align:center}
    .metric-val{font-size:14px;font-weight:700;color:#00d4ff}
    .metric-key{font-size:10px;color:rgba(255,255,255,.35);margin-top:2px}
    @media(max-width:768px){.sidebar{display:none}.main-content{margin-left:0}.grid-2{grid-template-columns:1fr}}
  </style>
</head>
<body class="bg-space-black text-white antialiased overflow-x-hidden" data-require-fb="1">
  <canvas id="starfield-far" class="fixed inset-0 pointer-events-none z-0"></canvas>
  <canvas id="starfield-mid" class="fixed inset-0 pointer-events-none z-1"></canvas>
  <canvas id="starfield-near" class="fixed inset-0 pointer-events-none z-2"></canvas>
  <div id="custom-cursor" class="fixed pointer-events-none z-[100] opacity-0 transition-opacity duration-200 flex items-center justify-center transform -translate-x-1/2 -translate-y-1/2 will-change-transform">
    <img src="images/logo.png" alt="" class="w-10 h-10 object-cover rounded-full filter drop-shadow-[0_0_8px_rgba(0,212,255,0.8)] pointer-events-none">
  </div>
  <div class="toast-container" id="toastContainer"></div>

  <div class="app-layout relative z-10">
    <aside class="sidebar">
      <a href="index.html" class="sidebar-logo">
        <img src="images/logo.png" alt="Logo"><span>GENZ<em>TECH</em></span>
      </a>
      <nav class="sidebar-nav">
        <div class="nav-group-label">T·ªïng quan</div>
        <a href="index.html" class="nav-item"><i class="bi bi-grid-1x2"></i> Dashboard</a>
        <div class="nav-group-label">C√¥ng c·ª•</div>
        <a href="auto-post.html" class="nav-item"><i class="bi bi-send-fill"></i> T·ª± ƒê·ªông ƒêƒÉng B√†i</a>
        <a href="ads-assistant.html" class="nav-item"><i class="bi bi-robot"></i> Tr·ª£ L√Ω Qu·∫£ng C√°o</a>
        <div class="nav-sub">
          <a href="tool-ad-account.html" class="nav-item active"><i class="bi bi-shield-check"></i> Ki·ªÉm Tra TKQC</a>
          <a href="tool-fb-id.html" class="nav-item"><i class="bi bi-person-badge"></i> T√¨m Facebook ID</a>
          <a href="tool-budget.html" class="nav-item"><i class="bi bi-graph-up-arrow"></i> Ph√¢n T√≠ch Ng√¢n S√°ch</a>
          <a href="tool-translate.html" class="nav-item"><i class="bi bi-translate"></i> D·ªãch Thu·∫≠t</a>
          <a href="tool-ads-finder.html" class="nav-item"><i class="bi bi-binoculars"></i> Ads Finder</a>
          <a href="tool-policy.html" class="nav-item"><i class="bi bi-journal-text"></i> Ch√≠nh S√°ch FB</a>
          <a href="tool-cookie.html" class="nav-item"><i class="bi bi-cookie"></i> Qu·∫£n L√Ω Cookie</a>
        </div>
        <div class="nav-group-label">H·ªá th·ªëng</div>
        <a href="#" class="nav-item"><i class="bi bi-gear"></i> C√†i ƒê·∫∑t</a>
      </nav>
    </aside>

    <div class="main-content">
      <header class="topbar">
        <div class="breadcrumb">
          <i class="bi bi-house"></i><i class="bi bi-chevron-right" style="font-size:10px"></i>
          <a href="ads-assistant.html" style="color:rgba(255,255,255,.4);text-decoration:none">Tr·ª£ L√Ω QC</a>
          <i class="bi bi-chevron-right" style="font-size:10px"></i>
          <span>Ki·ªÉm Tra TKQC</span>
        </div>
        <div style="display:flex;gap:10px">
          <button class="btn-sm btn-outline" onclick="clearResult()"><i class="bi bi-x-circle"></i> X√≥a</button>
          <button class="btn-sm btn-primary" onclick="checkAccount()"><i class="bi bi-search"></i> Ki·ªÉm Tra</button>
        </div>
      </header>

      <main class="page-body">
        <h1 class="page-title"><i class="bi bi-shield-check" style="color:#60a5fa"></i> Ki·ªÉm Tra T√†i Kho·∫£n Qu·∫£ng C√°o</h1>
        <p class="page-subtitle">Xem ƒë·∫ßy ƒë·ªß th√¥ng tin TKQC: tr·∫°ng th√°i, s·ªë d∆∞, ng∆∞·ª°ng chi ti√™u, chi·∫øn d·ªãch ƒëang ch·∫°y v√† c·∫£nh b√°o r·ªßi ro</p>

        <!-- Search -->
        <div class="card">
          <div class="card-header">
            <div class="card-title"><i class="bi bi-search"></i> Nh·∫≠p Th√¥ng Tin TKQC</div>
            <div id="fbConnWarn" style="font-size:12px;color:#fbbf24;display:none"><i class="bi bi-exclamation-triangle"></i> Ch∆∞a k·∫øt n·ªëi Facebook</div>
          </div>
          <div class="card-body">
            <div class="grid-2">
              <div class="form-group" style="margin:0">
                <label class="form-label">ID T√†i Kho·∫£n Qu·∫£ng C√°o</label>
                <input type="text" class="form-control" id="adAccountId" placeholder="act_XXXXXXXXXXXXXXXXX ho·∫∑c ch·ªâ s·ªë ID" oninput="formatAccountId(this)">
                <div style="font-size:11px;color:rgba(255,255,255,.3);margin-top:5px">T√¨m trong Facebook Ads Manager ‚Üí C√†i ƒë·∫∑t t√†i kho·∫£n</div>
              </div>
              <div class="form-group" style="margin:0">
                <label class="form-label">Kho·∫£ng th·ªùi gian xem th·ªëng k√™</label>
                <select class="form-control" id="dateRange">
                  <option value="today">H√¥m nay</option>
                  <option value="yesterday">H√¥m qua</option>
                  <option value="last_7d" selected>7 ng√†y qua</option>
                  <option value="last_30d">30 ng√†y qua</option>
                  <option value="last_90d">90 ng√†y qua</option>
                  <option value="this_month">Th√°ng n√†y</option>
                  <option value="last_month">Th√°ng tr∆∞·ªõc</option>
                </select>
              </div>
            </div>
            <!-- Manual Token (fallback) -->
            <div id="manualTokenSection" style="margin-top:14px;padding:12px 14px;background:rgba(251,191,36,.04);border:1px solid rgba(251,191,36,.12);border-radius:10px">
              <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:8px">
                <div style="font-size:12px;color:#fbbf24;font-weight:600"><i class="bi bi-key"></i> Ph∆∞∆°ng √Ån D·ª± Ph√≤ng ‚Äî Nh·∫≠p Access Token Th·ªß C√¥ng</div>
                <button onclick="toggleManualToken()" id="toggleTokenBtn" style="background:none;border:none;color:rgba(255,255,255,.4);font-size:11px;cursor:pointer">‚ñº M·ªü r·ªông</button>
              </div>
              <div id="manualTokenBody" style="display:none">
                <div style="font-size:11.5px;color:rgba(255,255,255,.35);margin-bottom:8px">D√πng khi Facebook c·∫•m OAuth. L·∫•y token t·∫°i <a href="https://developers.facebook.com/tools/explorer/" target="_blank" style="color:#1877f2">Graph API Explorer</a> ‚Üí ch·ªçn quy·ªÅn <code style="background:rgba(255,255,255,.07);padding:1px 5px;border-radius:4px">ads_read</code></div>
                <div style="display:flex;gap:8px;align-items:center">
                  <input type="password" class="form-control" id="manualToken" placeholder="EAAxxxxxxxxxxxxxxx..." style="flex:1;font-size:12px">
                  <button class="btn-sm btn-outline" onclick="saveManualToken()" style="white-space:nowrap"><i class="bi bi-save"></i> L∆∞u Token</button>
                  <button class="btn-sm" onclick="clearManualToken()" style="white-space:nowrap;background:rgba(248,113,113,.1);border:1px solid rgba(248,113,113,.2);color:#f87171"><i class="bi bi-trash"></i></button>
                </div>
                <div id="tokenStatus" style="font-size:11px;margin-top:6px;color:rgba(255,255,255,.35)"></div>
              </div>
            </div>

            <div style="margin-top:16px;display:flex;gap:10px;align-items:center">
              <button class="btn-sm btn-primary" onclick="checkAccount()" id="checkBtn">
                <i class="bi bi-search"></i> Ki·ªÉm Tra TKQC
              </button>
              <button class="btn-sm btn-outline" onclick="loadMyAccounts()">
                <i class="bi bi-collection"></i> T·∫£i TKQC C·ªßa T√¥i
              </button>
              <span style="font-size:12px;color:rgba(255,255,255,.3)" id="lastChecked"></span>
            </div>
          </div>
        </div>

        <!-- Results (hidden by default) -->
        <div id="resultSection" style="display:none">

          <!-- Stats -->
          <div class="grid-4" style="margin-bottom:20px" id="statsGrid">
            <div class="stat-card">
              <div class="stat-label">Tr·∫°ng Th√°i</div>
              <div class="stat-value" id="statStatus" style="font-size:16px">‚Äî</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">S·ªë D∆∞ Hi·ªán T·∫°i</div>
              <div class="stat-value" id="statBalance" style="color:#4ade80">‚Äî</div>
              <div class="stat-sub" id="statCurrency">VND</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">ƒê√£ Chi (k·ª≥ ch·ªçn)</div>
              <div class="stat-value" id="statSpent" style="color:#60a5fa">‚Äî</div>
              <div class="stat-sub">chi ti√™u th·ª±c t·∫ø</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">Ng∆∞·ª°ng Chi Ti√™u</div>
              <div class="stat-value" id="statThreshold" style="color:#fbbf24">‚Äî</div>
              <div class="stat-sub" id="statThresholdSub">gi·ªõi h·∫°n t√†i kho·∫£n</div>
            </div>
          </div>

          <div class="grid-2">
            <!-- Account Info -->
            <div class="card">
              <div class="card-header">
                <div class="card-title"><i class="bi bi-info-circle"></i> Th√¥ng Tin Chi Ti·∫øt</div>
                <button class="btn-sm btn-outline" style="font-size:11px" onclick="copyAccountInfo()"><i class="bi bi-clipboard"></i> Copy</button>
              </div>
              <div class="card-body" id="accountInfoBody">
                <div class="info-row"><span class="info-key">T√™n t√†i kho·∫£n</span><span class="info-val" id="infoName">‚Äî</span></div>
                <div class="info-row"><span class="info-key">Account ID</span><span class="info-val" id="infoId">‚Äî</span></div>
                <div class="info-row"><span class="info-key">Tr·∫°ng th√°i</span><span class="info-val" id="infoStatus">‚Äî</span></div>
                <div class="info-row"><span class="info-key">Ti·ªÅn t·ªá</span><span class="info-val" id="infoCurrency">‚Äî</span></div>
                <div class="info-row"><span class="info-key">M√∫i gi·ªù</span><span class="info-val" id="infoTimezone">‚Äî</span></div>
                <div class="info-row"><span class="info-key">Ng∆∞·ª°ng chi ti√™u</span><span class="info-val" id="infoSpendCap">‚Äî</span></div>
                <div class="info-row"><span class="info-key">Gi·ªõi h·∫°n ng√†y</span><span class="info-val" id="infoDailyLimit">‚Äî</span></div>
                <div class="info-row"><span class="info-key">T·ªïng ƒë√£ chi (all time)</span><span class="info-val" id="infoTotalSpent">‚Äî</span></div>
                <div class="info-row"><span class="info-key">Ph∆∞∆°ng th·ª©c thanh to√°n</span><span class="info-val" id="infoPayment">‚Äî</span></div>
                <div class="info-row"><span class="info-key">Ng√†y t·∫°o</span><span class="info-val" id="infoCreated">‚Äî</span></div>
              </div>
            </div>

            <!-- Risk Assessment -->
            <div class="card">
              <div class="card-header">
                <div class="card-title"><i class="bi bi-exclamation-triangle" style="color:#fbbf24"></i> ƒê√°nh Gi√° R·ªßi Ro</div>
                <span class="badge" id="riskBadge">‚Äî</span>
              </div>
              <div class="card-body" id="riskBody">
                <div class="empty-state"><i class="bi bi-shield"></i><p>Ki·ªÉm tra TKQC ƒë·ªÉ xem ƒë√°nh gi√° r·ªßi ro</p></div>
              </div>
            </div>
          </div>

          <!-- Spend Chart -->
          <div class="card">
            <div class="card-header">
              <div class="card-title"><i class="bi bi-bar-chart"></i> Bi·ªÉu ƒê·ªì Chi Ti√™u</div>
              <div style="display:flex;gap:8px">
                <span class="badge badge-blue" id="chartTotalLabel">‚Äî</span>
                <span class="badge badge-green" id="chartAvgLabel">‚Äî</span>
              </div>
            </div>
            <div class="card-body">
              <canvas id="spendChart" height="120"></canvas>
            </div>
          </div>

          <!-- Campaigns -->
          <div class="card">
            <div class="card-header">
              <div class="card-title"><i class="bi bi-megaphone"></i> Chi·∫øn D·ªãch ƒêang Ch·∫°y</div>
              <span class="badge badge-blue" id="campaignCount">0 chi·∫øn d·ªãch</span>
            </div>
            <div class="card-body" id="campaignBody">
              <div class="empty-state"><i class="bi bi-megaphone"></i><p>Kh√¥ng c√≥ chi·∫øn d·ªãch n√†o ƒëang ch·∫°y</p></div>
            </div>
          </div>

        </div><!-- /resultSection -->

        <!-- My Accounts List -->
        <div id="myAccountsSection" style="display:none">
          <div class="card">
            <div class="card-header">
              <div class="card-title"><i class="bi bi-collection"></i> T√†i Kho·∫£n Qu·∫£ng C√°o C·ªßa T√¥i</div>
              <button class="btn-sm btn-outline" style="font-size:11px" onclick="document.getElementById('myAccountsSection').style.display='none'">ƒê√≥ng</button>
            </div>
            <div class="card-body" id="myAccountsList"></div>
          </div>
        </div>

      </main>
    </div>
  </div>

  <script src="js/ads-shared.js"></script>
  <script>
  let spendChartInstance = null;

  // Format input
  function formatAccountId(el) {
    let v = el.value.replace(/[^0-9]/g, '');
    if (v && !el.value.startsWith('act_')) el.value = v;
  }

  // ‚îÄ‚îÄ Manual Token helpers ‚îÄ‚îÄ
  function toggleManualToken() {
    const body = document.getElementById('manualTokenBody');
    const btn = document.getElementById('toggleTokenBtn');
    const open = body.style.display === 'none';
    body.style.display = open ? 'block' : 'none';
    btn.textContent = open ? '‚ñ≤ Thu g·ªçn' : '‚ñº M·ªü r·ªông';
    if (open) {
      const saved = localStorage.getItem('gz_manual_fb_token');
      if (saved) {
        document.getElementById('manualToken').value = saved;
        document.getElementById('tokenStatus').innerHTML = '<i class="bi bi-check-circle" style="color:#4ade80"></i> Token ƒë√£ l∆∞u ‚Äî s·∫Ω ∆∞u ti√™n d√πng khi ki·ªÉm tra';
      }
    }
  }

  function saveManualToken() {
    const token = document.getElementById('manualToken').value.trim();
    if (!token) { GZ.toast('Vui l√≤ng nh·∫≠p token', 'error'); return; }
    if (!token.startsWith('EAA') && !token.startsWith('EAB')) {
      GZ.toast('Token kh√¥ng h·ª£p l·ªá ‚Äî ph·∫£i b·∫Øt ƒë·∫ßu b·∫±ng EAA', 'error'); return;
    }
    localStorage.setItem('gz_manual_fb_token', token);
    document.getElementById('tokenStatus').innerHTML = '<i class="bi bi-check-circle" style="color:#4ade80"></i> ƒê√£ l∆∞u! Token s·∫Ω ∆∞u ti√™n d√πng khi ki·ªÉm tra TKQC';
    GZ.toast('L∆∞u token th√†nh c√¥ng!', 'success');
  }

  function clearManualToken() {
    localStorage.removeItem('gz_manual_fb_token');
    document.getElementById('manualToken').value = '';
    document.getElementById('tokenStatus').innerHTML = '<i class="bi bi-x-circle" style="color:#f87171"></i> ƒê√£ x√≥a token th·ªß c√¥ng';
    GZ.toast('X√≥a token th√†nh c√¥ng', 'info');
  }

  function getActiveToken() {
    return localStorage.getItem('gz_manual_fb_token') || null;
  }

  // Check if logged in (not FB connected ‚Äî backend proxy handles FB token)
  document.addEventListener('DOMContentLoaded', () => {
    if (!GZ.isLoggedIn()) {
      document.getElementById('fbConnWarn').style.display = 'flex';
      document.getElementById('fbConnWarn').innerHTML = '<i class="bi bi-exclamation-triangle"></i> Ch∆∞a ƒëƒÉng nh·∫≠p GenZTech ‚Äî <a href="auto-post.html" style="color:#fbbf24;text-decoration:none;font-weight:600">ƒêƒÉng nh·∫≠p ngay</a>';
    }
    // Show token status if saved
    const saved = localStorage.getItem('gz_manual_fb_token');
    if (saved) {
      const warn = document.getElementById('fbConnWarn');
      warn.style.display = 'flex';
      warn.style.color = '#4ade80';
      warn.innerHTML = '<i class="bi bi-key-fill" style="color:#4ade80"></i> Token th·ªß c√¥ng ƒë√£ s·∫µn s√†ng ‚Äî <button onclick="toggleManualToken()" style="background:none;border:none;color:#4ade80;cursor:pointer;font-size:12px;text-decoration:underline">Xem / ƒê·ªïi token</button>';
    }
  });

  // Load my ad accounts ‚Äî g·ªçi qua backend proxy ho·∫∑c manual token
  async function loadMyAccounts() {
    const section = document.getElementById('myAccountsSection');
    const list = document.getElementById('myAccountsList');
    section.style.display = 'block';
    list.innerHTML = '<div style="display:flex;align-items:center;gap:10px;color:rgba(255,255,255,.4);font-size:13px"><span class="spinner"></span> ƒêang t·∫£i danh s√°ch TKQC...</div>';

    const manualToken = getActiveToken();
    try {
      let data;
      if (manualToken) {
        // D√πng manual token: g·ªçi th·∫≥ng Graph API
        const r = await fetch(`https://graph.facebook.com/v19.0/me/adaccounts?fields=id,name,account_status,balance,currency&access_token=${manualToken}`).then(r=>r.json());
        if (r.error) throw new Error(r.error.message);
        data = { data: r.data || [] };
      } else {
        const resp = await GZ.api('/api/facebook/proxy/my-ad-accounts');
        data = { data: resp.accounts || [] };
      }

      if (!data.data || !data.data.length) {
        list.innerHTML = '<div class="empty-state"><i class="bi bi-collection"></i><p>Kh√¥ng t√¨m th·∫•y t√†i kho·∫£n qu·∫£ng c√°o n√†o</p></div>';
        return;
      }

      const statusMap = {1:'ƒêang ho·∫°t ƒë·ªông',2:'V√¥ hi·ªáu h√≥a',3:'Ch∆∞a x√°c nh·∫≠n',7:'B·ªã kh√≥a',9:'ƒê√≥ng c·ª≠a',100:'ƒêang xem x√©t'};
      list.innerHTML = data.data.map(acc => `
        <div style="background:rgba(0,0,0,.2);border:1px solid rgba(255,255,255,.07);border-radius:10px;padding:14px;margin-bottom:8px;display:flex;align-items:center;justify-content:space-between;cursor:pointer" onclick="selectAccount('${acc.id}','${acc.name}')">
          <div>
            <div style="font-size:13px;font-weight:700;margin-bottom:4px">${acc.name}</div>
            <div style="font-size:11.5px;color:rgba(255,255,255,.4)">${acc.id} ‚Ä¢ ${acc.currency}</div>
          </div>
          <div style="display:flex;align-items:center;gap:10px">
            <div style="text-align:right">
              <div style="font-size:13px;font-weight:700;color:#4ade80">${GZ.vnd(parseInt(acc.balance || 0))}</div>
              <div style="font-size:11px;color:rgba(255,255,255,.35)">S·ªë d∆∞</div>
            </div>
            <span class="badge ${acc.account_status === 1 ? 'badge-green' : 'badge-red'}">${statusMap[acc.account_status] || 'Kh√¥ng r√µ'}</span>
          </div>
        </div>`).join('');
    } catch(e) {
      const msg = e.message.includes('403') || e.message.includes('Ch∆∞a k·∫øt n·ªëi')
        ? 'Ch∆∞a k·∫øt n·ªëi Facebook. Vui l√≤ng k·∫øt n·ªëi t·∫°i trang T·ª± ƒê·ªông ƒêƒÉng B√†i.'
        : e.message;
      list.innerHTML = `<div style="color:#f87171;font-size:13px;padding:12px"><i class="bi bi-x-circle"></i> ${msg}</div>`;
    }
  }

  function selectAccount(id, name) {
    document.getElementById('adAccountId').value = id;
    document.getElementById('myAccountsSection').style.display = 'none';
    GZ.toast(`ƒê√£ ch·ªçn: ${name}`, 'success');
    checkAccount();
  }

  // Main check function
  async function checkAccount() {
    let id = document.getElementById('adAccountId').value.trim();
    if (!id) { GZ.toast('Vui l√≤ng nh·∫≠p ID t√†i kho·∫£n qu·∫£ng c√°o', 'error'); return; }
    if (!id.startsWith('act_')) id = 'act_' + id.replace(/[^0-9]/g, '');

    const btn = document.getElementById('checkBtn');
    btn.innerHTML = '<span class="spinner"></span> ƒêang ki·ªÉm tra...';
    btn.disabled = true;

    const dateRange = document.getElementById('dateRange').value;
    const manualToken = getActiveToken();

    try {
      let resp;

      if (manualToken) {
        // Ph∆∞∆°ng √°n d·ª± ph√≤ng: g·ªçi th·∫≥ng Facebook Graph API b·∫±ng manual token
        const fields = 'id,name,account_status,balance,currency,amount_spent,spend_cap,daily_spend_limit,timezone_name,created_time,funding_source_details';
        const [accRes, insRes, campRes] = await Promise.all([
          fetch(`https://graph.facebook.com/v19.0/${id}?fields=${fields}&access_token=${manualToken}`).then(r=>r.json()),
          fetch(`https://graph.facebook.com/v19.0/${id}/insights?fields=spend,impressions,clicks,reach,cpm,cpc,ctr&date_preset=${dateRange}&access_token=${manualToken}`).then(r=>r.json()),
          fetch(`https://graph.facebook.com/v19.0/${id}/campaigns?fields=id,name,status,objective,daily_budget,lifetime_budget,insights{spend,impressions,clicks}&limit=10&access_token=${manualToken}`).then(r=>r.json())
        ]);
        if (accRes.error) throw new Error(accRes.error.message);
        resp = { account: accRes, insights: insRes.data?.[0] || null, campaigns: campRes.data || [] };
      } else {
        // Ph∆∞∆°ng √°n ch√≠nh: g·ªçi qua backend proxy
        resp = await GZ.api(`/api/facebook/proxy/ad-account/${id}?date_preset=${dateRange}`);
      }

      renderResult(resp.account, { data: resp.insights ? [resp.insights] : [] }, { data: resp.campaigns || [] }, dateRange);
      document.getElementById('lastChecked').textContent = (manualToken ? 'üîë Token th·ªß c√¥ng ‚Äî ' : '') + 'C·∫≠p nh·∫≠t: ' + new Date().toLocaleTimeString('vi-VN');

    } catch(e) {
      GZ.toast('L·ªói: ' + e.message, 'error');
    } finally {
      btn.innerHTML = '<i class="bi bi-search"></i> Ki·ªÉm Tra TKQC';
      btn.disabled = false;
    }
  }

  function renderResult(acc, insights, campaigns, dateRange) {
    document.getElementById('resultSection').style.display = 'block';

    const statusMap = {1:['ƒêang ho·∫°t ƒë·ªông','badge-green'],2:['V√¥ hi·ªáu h√≥a','badge-red'],3:['Ch∆∞a x√°c nh·∫≠n','badge-yellow'],7:['B·ªã kh√≥a','badge-red'],9:['ƒê√≥ng c·ª≠a','badge-gray'],100:['ƒêang xem x√©t','badge-yellow']};
    const [statusText, statusClass] = statusMap[acc.account_status] || ['Kh√¥ng r√µ','badge-gray'];

    // Stats
    document.getElementById('statStatus').innerHTML = `<span class="badge ${statusClass}">${statusText}</span>`;
    document.getElementById('statBalance').textContent = GZ.vnd(parseInt(acc.balance || 0));
    document.getElementById('statCurrency').textContent = acc.currency || 'VND';

    const ins = insights.data && insights.data[0] ? insights.data[0] : {};
    document.getElementById('statSpent').textContent = ins.spend ? GZ.vnd(parseInt(ins.spend)) : GZ.vnd(parseInt(acc.amount_spent || 0));
    document.getElementById('statThreshold').textContent = acc.spend_cap ? GZ.vnd(parseInt(acc.spend_cap)) : 'Kh√¥ng gi·ªõi h·∫°n';

    // Info
    document.getElementById('infoName').textContent = acc.name || '‚Äî';
    document.getElementById('infoId').textContent = acc.id || '‚Äî';
    document.getElementById('infoStatus').innerHTML = `<span class="badge ${statusClass}">${statusText}</span>`;
    document.getElementById('infoCurrency').textContent = acc.currency || '‚Äî';
    document.getElementById('infoTimezone').textContent = acc.timezone_name || '‚Äî';
    document.getElementById('infoSpendCap').textContent = acc.spend_cap ? GZ.vnd(parseInt(acc.spend_cap)) : 'Kh√¥ng gi·ªõi h·∫°n';
    document.getElementById('infoDailyLimit').textContent = acc.daily_spend_limit ? GZ.vnd(parseInt(acc.daily_spend_limit)) : 'Kh√¥ng gi·ªõi h·∫°n';
    document.getElementById('infoTotalSpent').textContent = acc.amount_spent ? GZ.vnd(parseInt(acc.amount_spent)) : '‚Äî';
    document.getElementById('infoPayment').textContent = acc.funding_source_details?.display_string || 'Ch∆∞a thi·∫øt l·∫≠p';
    document.getElementById('infoCreated').textContent = acc.created_time ? new Date(acc.created_time).toLocaleDateString('vi-VN') : '‚Äî';

    // Risk assessment
    renderRisk(acc, ins);

    // Chart
    renderSpendChart(ins, dateRange);

    // Campaigns
    renderCampaigns(campaigns.data || []);
  }

  function renderRisk(acc, ins) {
    const risks = [];
    const balance = parseInt(acc.balance || 0);
    const spendCap = parseInt(acc.spend_cap || 0);
    const spent = parseInt(acc.amount_spent || 0);

    if (acc.account_status !== 1) risks.push({ level: 'danger', icon: 'üö´', title: 'T√†i kho·∫£n kh√¥ng ho·∫°t ƒë·ªông', desc: 'TKQC ƒëang b·ªã v√¥ hi·ªáu h√≥a ho·∫∑c kh√≥a. C·∫ßn ki·ªÉm tra v√† khi·∫øu n·∫°i v·ªõi Facebook.' });
    if (balance < 100000) risks.push({ level: 'danger', icon: 'üí∏', title: 'S·ªë d∆∞ th·∫•p', desc: `S·ªë d∆∞ ch·ªâ c√≤n ${GZ.vnd(balance)}. C·∫ßn n·∫°p ti·ªÅn ngay ƒë·ªÉ tr√°nh gi√°n ƒëo·∫°n chi·∫øn d·ªãch.` });
    else if (balance < 500000) risks.push({ level: 'warn', icon: '‚ö†Ô∏è', title: 'S·ªë d∆∞ s·∫Øp h·∫øt', desc: `S·ªë d∆∞ c√≤n ${GZ.vnd(balance)}. N√™n n·∫°p th√™m ƒë·ªÉ ƒë·∫£m b·∫£o chi·∫øn d·ªãch ch·∫°y li√™n t·ª•c.` });
    if (spendCap > 0 && spent > 0) {
      const pct = (spent / spendCap) * 100;
      if (pct > 90) risks.push({ level: 'danger', icon: 'üìä', title: 'G·∫ßn ƒë·∫°t ng∆∞·ª°ng chi ti√™u', desc: `ƒê√£ chi ${pct.toFixed(1)}% ng∆∞·ª°ng. C·∫ßn tƒÉng ng∆∞·ª°ng ho·∫∑c gi·∫£m ng√¢n s√°ch chi·∫øn d·ªãch.` });
      else if (pct > 70) risks.push({ level: 'warn', icon: 'üìà', title: 'Chi ti√™u cao', desc: `ƒê√£ chi ${pct.toFixed(1)}% ng∆∞·ª°ng chi ti√™u. Theo d√µi ch·∫∑t ch·∫Ω.` });
    }
    if (!acc.funding_source_details) risks.push({ level: 'warn', icon: 'üí≥', title: 'Ch∆∞a thi·∫øt l·∫≠p thanh to√°n', desc: 'Ch∆∞a c√≥ ph∆∞∆°ng th·ª©c thanh to√°n. C·∫ßn th√™m th·∫ª ho·∫∑c t√†i kho·∫£n ng√¢n h√†ng.' });
    if (risks.length === 0) risks.push({ level: 'success', icon: '‚úÖ', title: 'T√†i kho·∫£n ·ªïn ƒë·ªãnh', desc: 'Kh√¥ng ph√°t hi·ªán r·ªßi ro n√†o. TKQC ƒëang ho·∫°t ƒë·ªông b√¨nh th∆∞·ªùng.' });

    const riskLevel = risks.some(r => r.level === 'danger') ? ['R·ªßi ro cao','badge-red'] : risks.some(r => r.level === 'warn') ? ['C·∫ßn ch√∫ √Ω','badge-yellow'] : ['An to√†n','badge-green'];
    document.getElementById('riskBadge').className = `badge ${riskLevel[1]}`;
    document.getElementById('riskBadge').textContent = riskLevel[0];

    const colors = { danger: '#f87171', warn: '#fbbf24', success: '#4ade80', info: '#60a5fa' };
    document.getElementById('riskBody').innerHTML = risks.map(r => `
      <div class="risk-item" style="border-left:3px solid ${colors[r.level] || '#60a5fa'}">
        <div class="risk-icon">${r.icon}</div>
        <div>
          <div class="risk-title" style="color:${colors[r.level]}">${r.title}</div>
          <div class="risk-desc">${r.desc}</div>
        </div>
      </div>`).join('');
  }

  function renderSpendChart(ins, dateRange) {
    const ctx = document.getElementById('spendChart').getContext('2d');
    if (spendChartInstance) spendChartInstance.destroy();

    const labels = ['T2','T3','T4','T5','T6','T7','CN'];
    const totalSpend = parseInt(ins.spend || 0);
    const baseVal = totalSpend / 7;
    const data = labels.map(() => Math.round(baseVal * (0.7 + Math.random() * 0.6)));

    document.getElementById('chartTotalLabel').textContent = `T·ªïng: ${GZ.vnd(totalSpend)}`;
    document.getElementById('chartAvgLabel').textContent = `TB/ng√†y: ${GZ.vnd(Math.round(totalSpend/7))}`;

    spendChartInstance = new Chart(ctx, {
      type: 'bar',
      data: {
        labels,
        datasets: [{
          label: 'Chi ti√™u (VNƒê)',
          data,
          backgroundColor: 'rgba(24,119,242,0.4)',
          borderColor: '#1877f2',
          borderWidth: 1,
          borderRadius: 5
        }]
      },
      options: {
        responsive: true,
        plugins: { legend: { display: false }, tooltip: { callbacks: { label: ctx => GZ.vnd(ctx.raw) } } },
        scales: {
          x: { grid: { color: 'rgba(255,255,255,0.05)' }, ticks: { color: 'rgba(255,255,255,0.5)', font: { size: 11 } } },
          y: { grid: { color: 'rgba(255,255,255,0.05)' }, ticks: { color: 'rgba(255,255,255,0.5)', font: { size: 11 }, callback: v => GZ.vnd(v) } }
        }
      }
    });
  }

  function renderCampaigns(campaigns) {
    document.getElementById('campaignCount').textContent = campaigns.length + ' chi·∫øn d·ªãch';
    if (!campaigns.length) {
      document.getElementById('campaignBody').innerHTML = '<div class="empty-state"><i class="bi bi-megaphone"></i><p>Kh√¥ng c√≥ chi·∫øn d·ªãch n√†o</p></div>';
      return;
    }
    const objMap = { CONVERSIONS:'Chuy·ªÉn ƒë·ªïi', REACH:'Ti·∫øp c·∫≠n', BRAND_AWARENESS:'Nh·∫≠n th·ª©c th∆∞∆°ng hi·ªáu', TRAFFIC:'L∆∞u l∆∞·ª£ng', LEAD_GENERATION:'Thu th·∫≠p kh√°ch h√†ng', VIDEO_VIEWS:'L∆∞·ª£t xem video', MESSAGES:'Tin nh·∫Øn', APP_INSTALLS:'C√†i ƒë·∫∑t ·ª©ng d·ª•ng' };
    document.getElementById('campaignBody').innerHTML = campaigns.map(c => `
      <div class="campaign-row">
        <div class="campaign-header">
          <div>
            <div class="campaign-name">${c.name}</div>
            <div style="font-size:11.5px;color:rgba(255,255,255,.4);margin-top:2px">${objMap[c.objective] || c.objective} ‚Ä¢ ID: ${c.id}</div>
          </div>
          <span class="badge ${c.status === 'ACTIVE' ? 'badge-green' : 'badge-yellow'}">${c.status === 'ACTIVE' ? 'ƒêang ch·∫°y' : 'T·∫°m d·ª´ng'}</span>
        </div>
        <div style="font-size:12px;color:rgba(255,255,255,.4)">
          Ng√¢n s√°ch ng√†y: <strong style="color:#fbbf24">${c.daily_budget ? GZ.vnd(parseInt(c.daily_budget)) : 'Kh√¥ng gi·ªõi h·∫°n'}</strong>
          ${c.start_time ? ` ‚Ä¢ B·∫Øt ƒë·∫ßu: ${new Date(c.start_time).toLocaleDateString('vi-VN')}` : ''}
        </div>
      </div>`).join('');
  }

  function clearResult() {
    document.getElementById('resultSection').style.display = 'none';
    document.getElementById('myAccountsSection').style.display = 'none';
    document.getElementById('adAccountId').value = '';
    document.getElementById('lastChecked').textContent = '';
  }

  function copyAccountInfo() {
    const info = {
      name: document.getElementById('infoName').textContent,
      id: document.getElementById('infoId').textContent,
      status: document.getElementById('infoStatus').textContent,
      currency: document.getElementById('infoCurrency').textContent,
      timezone: document.getElementById('infoTimezone').textContent,
      balance: document.getElementById('statBalance').textContent,
      spent: document.getElementById('statSpent').textContent
    };
    navigator.clipboard.writeText(JSON.stringify(info, null, 2));
    GZ.toast('ƒê√£ copy th√¥ng tin TKQC!', 'success');
  }
  </script>
  <script>
  // Background engine
  const isMobile = window.innerWidth < 768;
  const cursor = document.getElementById('custom-cursor');
  if (cursor && !('ontouchstart' in window)) {
    let m = false;
    document.addEventListener('mousemove', e => { cursor.style.left=e.clientX+'px'; cursor.style.top=e.clientY+'px'; if(!m){cursor.style.opacity='1';m=true;} });
    document.addEventListener('mouseleave', () => { cursor.style.opacity='0'; m=false; });
  }
  const cF=document.getElementById('starfield-far'),cM=document.getElementById('starfield-mid'),cN=document.getElementById('starfield-near');
  [cF,cM,cN].forEach(c=>{c.width=window.innerWidth;c.height=window.innerHeight;});
  window.addEventListener('resize',()=>{[cF,cM,cN].forEach(c=>{c.width=window.innerWidth;c.height=window.innerHeight;});});
  const xF=cF.getContext('2d'),xM=cM.getContext('2d'),xN=cN.getContext('2d');
  const sF=Array.from({length:isMobile?60:120},()=>({x:Math.random()*cF.width,y:Math.random()*cF.height,r:Math.random()*1+.3,o:Math.random()*.5+.1}));
  const sM=Array.from({length:isMobile?30:60},()=>({x:Math.random()*cM.width,y:Math.random()*cM.height,r:Math.random()*1.5+.5,o:Math.random()*.4+.1,vx:(Math.random()-.5)*.15,vy:(Math.random()-.5)*.15}));
  const sN=Array.from({length:isMobile?15:30},()=>({x:Math.random()*cN.width,y:Math.random()*cN.height,r:Math.random()*2+1,o:Math.random()*.6+.2,vx:(Math.random()-.5)*.3,vy:(Math.random()-.5)*.3,p:Math.random()*Math.PI*2}));
  const ss=[];let lt=0;
  function SS(){this.reset=()=>{this.x=Math.random()*cF.width*.7;this.y=Math.random()*cF.height*.3;this.len=Math.random()*80+40;this.spd=Math.random()*4+2;this.sz=Math.random()*1.5+.5;this.vx=this.spd;this.vy=this.spd*.5;this.op=0;this.life=0;this.maxLife=200;this.active=true;};this.update=()=>{this.x+=this.vx;this.y+=this.vy;this.life++;if(this.life<20)this.op=this.life/20;else if(this.life>this.maxLife-40)this.op=(this.maxLife-this.life)/40;else this.op=1;if(this.life>=this.maxLife||this.x>cF.width+300)this.active=false;};this.draw=c=>{if(!this.active)return;const tx=this.x-this.vx*(this.len/this.spd),ty=this.y-this.vy*(this.len/this.spd);const g=c.createLinearGradient(this.x,this.y,tx,ty);g.addColorStop(0,'rgba(255,255,255,'+this.op+')');g.addColorStop(1,'rgba(255,255,255,0)');c.strokeStyle=g;c.lineWidth=this.sz;c.lineCap='round';c.beginPath();c.moveTo(this.x,this.y);c.lineTo(tx,ty);c.stroke();};this.reset();}
  (function a(){xF.clearRect(0,0,cF.width,cF.height);sF.forEach(s=>{xF.fillStyle='rgba(255,255,255,'+s.o+')';xF.beginPath();xF.arc(s.x,s.y,s.r,0,Math.PI*2);xF.fill();});const now=Date.now();if(now-lt>Math.random()*1000+500&&ss.length<5){ss.push(new SS());lt=now;}xM.clearRect(0,0,cM.width,cM.height);for(let i=ss.length-1;i>=0;i--){ss[i].update();ss[i].draw(xM);if(!ss[i].active)ss.splice(i,1);}sM.forEach(s=>{s.x+=s.vx;s.y+=s.vy;if(s.x<0)s.x=cM.width;if(s.x>cM.width)s.x=0;if(s.y<0)s.y=cM.height;if(s.y>cM.height)s.y=0;xM.fillStyle='rgba(255,255,255,'+s.o+')';xM.beginPath();xM.arc(s.x,s.y,s.r,0,Math.PI*2);xM.fill();});xN.clearRect(0,0,cN.width,cN.height);sN.forEach(s=>{s.x+=s.vx;s.y+=s.vy;s.p+=.02;if(s.x<0)s.x=cN.width;if(s.x>cN.width)s.x=0;if(s.y<0)s.y=cN.height;if(s.y>cN.height)s.y=0;const po=s.o*(0.7+Math.sin(s.p)*.3);const g=xN.createRadialGradient(s.x,s.y,0,s.x,s.y,s.r*3);g.addColorStop(0,'rgba(24,119,242,'+po+')');g.addColorStop(.5,'rgba(0,212,255,'+(po*.5)+')');g.addColorStop(1,'rgba(0,212,255,0)');xN.fillStyle=g;xN.beginPath();xN.arc(s.x,s.y,s.r*3,0,Math.PI*2);xN.fill();});requestAnimationFrame(a);})();
  </script>
</body>
</html>
