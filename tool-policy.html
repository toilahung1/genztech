<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ch√≠nh S√°ch Facebook ‚Äî Genztech</title>
  <link rel="stylesheet" href="css/main.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <style>
    html,body{scrollbar-width:none;-ms-overflow-style:none;cursor:none;background:#080c1e;color:#fff;font-family:Inter,sans-serif}
    html::-webkit-scrollbar,body::-webkit-scrollbar{display:none;width:0}
    .app-layout{display:flex;min-height:100vh}
    .sidebar{width:260px;flex-shrink:0;background:rgba(10,14,39,.85);backdrop-filter:blur(20px);border-right:1px solid rgba(255,255,255,.06);display:flex;flex-direction:column;position:fixed;top:0;left:0;bottom:0;z-index:40}
    .sidebar-logo{padding:20px 20px 16px;border-bottom:1px solid rgba(255,255,255,.06);display:flex;align-items:center;gap:10px;text-decoration:none}
    .sidebar-logo img{width:36px;height:36px;border-radius:50%}
    .sidebar-logo span{font-size:15px;font-weight:700;letter-spacing:.5px;color:#fff}
    .sidebar-logo span em{color:#00d4ff;font-style:normal}
    .sidebar-nav{flex:1;padding:12px 0;overflow-y:auto}
    .nav-group-label{font-size:10px;font-weight:600;letter-spacing:1.2px;color:rgba(255,255,255,.3);text-transform:uppercase;padding:12px 20px 4px}
    .nav-item{display:flex;align-items:center;gap:10px;padding:10px 20px;font-size:13.5px;color:rgba(255,255,255,.6);text-decoration:none;transition:all .2s;border-left:2px solid transparent}
    .nav-item:hover{color:#fff;background:rgba(255,255,255,.04)}
    .nav-item.active{color:#00d4ff;background:rgba(0,212,255,.08);border-left-color:#00d4ff}
    .nav-item i{width:18px;text-align:center;font-size:15px}
    .nav-sub .nav-item{font-size:12.5px;padding:7px 20px 7px 36px}
    .main-content{margin-left:260px;flex:1;display:flex;flex-direction:column;min-height:100vh}
    .topbar{position:sticky;top:0;z-index:30;background:rgba(10,14,39,.85);backdrop-filter:blur(20px);border-bottom:1px solid rgba(255,255,255,.06);padding:0 28px;height:64px;display:flex;align-items:center;justify-content:space-between}
    .breadcrumb{font-size:13px;color:rgba(255,255,255,.4);display:flex;align-items:center;gap:6px}
    .breadcrumb span{color:#fff;font-weight:600}
    .btn-sm{padding:7px 16px;border-radius:8px;font-size:13px;font-weight:600;border:none;cursor:pointer;transition:all .2s;display:flex;align-items:center;gap:6px}
    .btn-primary{background:linear-gradient(135deg,#0ea5e9,#38bdf8);color:#fff}
    .btn-primary:hover{opacity:.9;transform:translateY(-1px)}
    .btn-outline{background:transparent;color:rgba(255,255,255,.7);border:1px solid rgba(255,255,255,.15)}
    .btn-outline:hover{border-color:#38bdf8;color:#38bdf8}
    .page-body{padding:28px;flex:1}
    .page-title{font-size:22px;font-weight:700;margin-bottom:4px}
    .page-subtitle{font-size:13px;color:rgba(255,255,255,.45);margin-bottom:24px}
    .card{background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.07);border-radius:14px;overflow:hidden;margin-bottom:20px}
    .card-header{padding:16px 20px;border-bottom:1px solid rgba(255,255,255,.06);display:flex;align-items:center;justify-content:space-between}
    .card-title{font-size:14px;font-weight:700;display:flex;align-items:center;gap:8px}
    .card-title i{color:#38bdf8}
    .card-body{padding:20px}
    .form-control{width:100%;background:rgba(0,0,0,.3);border:1px solid rgba(255,255,255,.1);border-radius:8px;padding:10px 14px;color:#fff;font-size:13.5px;transition:border-color .2s;box-sizing:border-box;font-family:inherit}
    .form-control:focus{outline:none;border-color:#38bdf8}
    .form-control::placeholder{color:rgba(255,255,255,.25)}
    .policy-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:14px;margin-bottom:20px}
    @media(max-width:1100px){.policy-grid{grid-template-columns:repeat(2,1fr)}}
    @media(max-width:768px){.policy-grid{grid-template-columns:1fr};.sidebar{display:none};.main-content{margin-left:0}}
    .policy-card{background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.07);border-radius:12px;padding:16px;cursor:pointer;transition:all .2s}
    .policy-card:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(0,0,0,.3)}
    .policy-card.danger{border-left:3px solid #ef4444}
    .policy-card.warning{border-left:3px solid #fbbf24}
    .policy-card.info{border-left:3px solid #60a5fa}
    .policy-card.success{border-left:3px solid #22c55e}
    .policy-icon{font-size:24px;margin-bottom:10px}
    .policy-title{font-size:13.5px;font-weight:700;margin-bottom:6px}
    .policy-desc{font-size:12px;color:rgba(255,255,255,.45);line-height:1.5;margin-bottom:10px}
    .policy-badge{display:inline-flex;align-items:center;gap:4px;font-size:10.5px;padding:3px 8px;border-radius:12px;font-weight:600}
    .badge-danger{background:rgba(239,68,68,.15);color:#f87171}
    .badge-warning{background:rgba(251,191,36,.15);color:#fbbf24}
    .badge-info{background:rgba(96,165,250,.15);color:#60a5fa}
    .badge-success{background:rgba(34,197,94,.15);color:#4ade80}
    .policy-detail{display:none;background:rgba(0,0,0,.3);border-radius:10px;padding:16px;margin-top:12px;font-size:12.5px;line-height:1.7;color:rgba(255,255,255,.6)}
    .policy-detail.open{display:block}
    .policy-detail h4{font-size:13px;font-weight:700;color:#fff;margin-bottom:8px}
    .policy-detail ul{margin:0;padding-left:18px}
    .policy-detail li{margin-bottom:5px}
    .policy-detail .do{color:#4ade80}
    .policy-detail .dont{color:#f87171}
    .checker-area{width:100%;min-height:100px;background:rgba(0,0,0,.3);border:1px solid rgba(255,255,255,.1);border-radius:10px;padding:14px;color:#fff;font-size:13.5px;resize:vertical;font-family:inherit;line-height:1.6;box-sizing:border-box;transition:border-color .2s}
    .checker-area:focus{outline:none;border-color:#38bdf8}
    .checker-area::placeholder{color:rgba(255,255,255,.2)}
    .check-result{margin-top:14px}
    .check-item{background:rgba(0,0,0,.2);border-radius:8px;padding:10px 14px;margin-bottom:6px;display:flex;align-items:flex-start;gap:10px;font-size:12.5px}
    .check-item.pass{border-left:3px solid #22c55e}
    .check-item.fail{border-left:3px solid #ef4444}
    .check-item.warn{border-left:3px solid #fbbf24}
    .check-icon{font-size:16px;flex-shrink:0;margin-top:1px}
    .check-text{flex:1}
    .check-label{font-weight:700;margin-bottom:2px}
    .check-detail{color:rgba(255,255,255,.4);font-size:11.5px}
    .toast-container{position:fixed;bottom:24px;right:24px;z-index:999;display:flex;flex-direction:column;gap:8px}
    .toast{background:#1e293b;border:1px solid rgba(255,255,255,.1);border-radius:10px;padding:12px 16px;font-size:13px;display:flex;align-items:center;gap:10px;min-width:260px;animation:slideIn .3s ease;box-shadow:0 8px 24px rgba(0,0,0,.4);transition:opacity .3s}
    .toast.success{border-left:3px solid #22c55e}.toast.error{border-left:3px solid #ef4444}.toast.info{border-left:3px solid #60a5fa}
    @keyframes slideIn{from{transform:translateX(100%);opacity:0}to{transform:translateX(0);opacity:1}}

    /* AI Checker styles */
    .ai-checker-grid{display:grid;grid-template-columns:1fr 1fr;gap:20px}
    @media(max-width:900px){.ai-checker-grid{grid-template-columns:1fr}}
    .form-label-ai{display:block;font-size:11.5px;font-weight:700;color:rgba(255,255,255,.4);text-transform:uppercase;letter-spacing:.7px;margin-bottom:6px}
    .form-label-ai span{font-size:11px;font-weight:400;color:rgba(255,255,255,.25);text-transform:none;letter-spacing:0;margin-left:6px}
    .form-ctrl{width:100%;background:rgba(0,0,0,.3);border:1px solid rgba(255,255,255,.1);border-radius:8px;padding:9px 12px;color:#fff;font-size:13px;outline:none;transition:border .2s;font-family:inherit;box-sizing:border-box}
    .form-ctrl:focus{border-color:#38bdf8}
    .form-ctrl::placeholder{color:rgba(255,255,255,.2)}
    textarea.form-ctrl{resize:vertical;min-height:140px;line-height:1.6}
    select.form-ctrl option{background:#1a1f3a;color:#fff}
    .upload-zone{border:2px dashed rgba(255,255,255,.12);border-radius:10px;padding:22px;text-align:center;cursor:pointer;transition:all .2s;position:relative;margin-top:8px}
    .upload-zone:hover,.upload-zone.drag-over{border-color:#38bdf8;background:rgba(56,189,248,.04)}
    .upload-zone input[type=file]{position:absolute;inset:0;opacity:0;cursor:pointer}
    .upload-zone i{font-size:28px;color:rgba(255,255,255,.2);display:block;margin-bottom:6px}
    .upload-zone p{font-size:12.5px;color:rgba(255,255,255,.35)}
    .img-prev{width:100%;max-height:220px;object-fit:contain;border-radius:8px;margin-top:8px;display:none}
    /* Score */
    .ai-score-wrap{text-align:center;margin-bottom:16px}
    .ai-score-ring{width:100px;height:100px;border-radius:50%;display:flex;flex-direction:column;align-items:center;justify-content:center;font-weight:800;margin:0 auto 10px;border:4px solid}
    .ai-score-ring .snum{font-size:30px;line-height:1}
    .ai-score-ring .slbl{font-size:10px;opacity:.6;margin-top:2px}
    .ring-safe{border-color:#4ade80;color:#4ade80;background:rgba(74,222,128,.08)}
    .ring-ok{border-color:#38bdf8;color:#38bdf8;background:rgba(56,189,248,.08)}
    .ring-warn{border-color:#fbbf24;color:#fbbf24;background:rgba(251,191,36,.08)}
    .ring-danger{border-color:#f87171;color:#f87171;background:rgba(248,113,113,.08)}
    .verdict-pill{display:inline-flex;align-items:center;gap:6px;padding:4px 14px;border-radius:20px;font-size:12.5px;font-weight:700;margin-bottom:10px}
    .pill-safe{background:rgba(74,222,128,.12);color:#4ade80}
    .pill-ok{background:rgba(56,189,248,.12);color:#38bdf8}
    .pill-warn{background:rgba(251,191,36,.12);color:#fbbf24}
    .pill-danger{background:rgba(248,113,113,.12);color:#f87171}
    /* Violation */
    .vio-item{background:rgba(0,0,0,.2);border-radius:9px;padding:12px 14px;margin-bottom:8px;border-left:3px solid}
    .vio-critical{border-left-color:#ef4444}
    .vio-high{border-left-color:#f97316}
    .vio-medium{border-left-color:#eab308}
    .vio-low{border-left-color:#6b7280}
    .vio-head{display:flex;align-items:center;gap:8px;margin-bottom:6px}
    .sev-tag{padding:2px 7px;border-radius:4px;font-size:10px;font-weight:700;text-transform:uppercase}
    .tag-critical{background:rgba(239,68,68,.2);color:#f87171}
    .tag-high{background:rgba(249,115,22,.2);color:#fb923c}
    .tag-medium{background:rgba(234,179,8,.2);color:#fbbf24}
    .tag-low{background:rgba(107,114,128,.2);color:#9ca3af}
    .vio-type{font-size:13px;font-weight:700;color:#fff}
    .vio-excerpt{font-size:12px;color:rgba(255,255,255,.45);background:rgba(255,255,255,.04);padding:5px 9px;border-radius:5px;margin-bottom:6px;font-style:italic}
    .vio-reason{font-size:12.5px;color:rgba(255,255,255,.55);margin-bottom:6px;line-height:1.5}
    .vio-fix{font-size:12.5px;color:#4ade80;display:flex;align-items:flex-start;gap:5px;line-height:1.5}
    /* Rec */
    .rec-row{background:rgba(0,0,0,.2);border-radius:9px;padding:12px 14px;margin-bottom:8px;display:flex;gap:10px}
    .rec-ico{width:34px;height:34px;border-radius:8px;display:flex;align-items:center;justify-content:center;flex-shrink:0;font-size:15px}
    .rec-high .rec-ico{background:rgba(248,113,113,.12);color:#f87171}
    .rec-medium .rec-ico{background:rgba(251,191,36,.12);color:#fbbf24}
    .rec-low .rec-ico{background:rgba(107,114,128,.12);color:#9ca3af}
    .rec-act{font-size:13px;font-weight:600;color:#fff;margin-bottom:3px}
    .rec-imp{font-size:12px;color:rgba(255,255,255,.4);line-height:1.5}
    /* Bars */
    .sbar-wrap{margin-bottom:10px}
    .sbar-lbl{display:flex;justify-content:space-between;font-size:12px;margin-bottom:3px}
    .sbar-track{height:5px;background:rgba(255,255,255,.07);border-radius:3px;overflow:hidden}
    .sbar-fill{height:100%;border-radius:3px;transition:width .6s ease}
    /* Section header */
    .sec-hdr{display:flex;align-items:center;gap:7px;font-size:11.5px;font-weight:700;color:rgba(255,255,255,.35);text-transform:uppercase;letter-spacing:.8px;margin:14px 0 8px;padding-bottom:5px;border-bottom:1px solid rgba(255,255,255,.05)}
    /* No vio */
    .no-vio{display:flex;align-items:center;gap:8px;padding:12px 14px;background:rgba(74,222,128,.06);border:1px solid rgba(74,222,128,.12);border-radius:8px;color:#4ade80;font-size:12.5px}
    /* Analyzing */
    .ai-analyzing{display:none;flex-direction:column;align-items:center;justify-content:center;padding:40px;gap:14px;text-align:center}
    .ai-analyzing.show{display:flex}
    .ai-spin{width:50px;height:50px;border:4px solid rgba(56,189,248,.15);border-top-color:#38bdf8;border-radius:50%;animation:spin .8s linear infinite}
    @keyframes spin{to{transform:rotate(360deg)}}
    .ai-empty{text-align:center;padding:40px 20px;color:rgba(255,255,255,.2)}
    .ai-empty i{font-size:42px;display:block;margin-bottom:10px;opacity:.25}
    .hint-text{font-size:11.5px;color:rgba(255,255,255,.25);margin-top:4px;line-height:1.5}
      .nav-sub-item{display:flex;align-items:center;gap:10px;padding:7px 18px 7px 34px;font-size:12px;color:rgba(255,255,255,.5);text-decoration:none;transition:all .2s;border-left:2px solid transparent;width:100%;box-sizing:border-box}
    .nav-sub-item:hover{color:#fff;background:rgba(255,255,255,.04)}
    .nav-sub-item.active{color:#00d4ff;background:rgba(0,212,255,.06);border-left-color:#00d4ff}
    .nav-sub-item i{width:15px;text-align:center;font-size:13px}
  
    /* -- Universe Background -- */
    canvas.bg-canvas{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:0}
    #custom-cursor{position:fixed;width:20px;height:20px;border-radius:50%;border:2px solid rgba(0,212,255,.8);pointer-events:none;z-index:9999;transform:translate(-50%,-50%);transition:opacity .3s;opacity:0;mix-blend-mode:screen}
    .nebula-overlay{position:fixed;inset:0;pointer-events:none;z-index:0;background:radial-gradient(ellipse 80% 60% at 20% 30%,rgba(24,119,242,.07) 0%,transparent 60%),radial-gradient(ellipse 60% 50% at 80% 70%,rgba(0,212,255,.06) 0%,transparent 55%),radial-gradient(ellipse 50% 40% at 50% 10%,rgba(139,92,246,.05) 0%,transparent 50%)}
  </style>
</head>
<body class="bg-space-black text-white antialiased overflow-x-hidden">
  <!-- Universe Background -->
  <canvas class="bg-canvas" id="gz-stars"></canvas>
  <canvas class="bg-canvas" id="gz-particles"></canvas>
  <div class="nebula-overlay"></div>
  <div id="custom-cursor"></div>
  <canvas id="starfield-far" class="fixed inset-0 pointer-events-none z-0"></canvas>
  <canvas id="starfield-mid" class="fixed inset-0 pointer-events-none z-1"></canvas>
  <canvas id="starfield-near" class="fixed inset-0 pointer-events-none z-2"></canvas>
  <div id="custom-cursor" class="fixed pointer-events-none z-[100] opacity-0 transition-opacity duration-200 flex items-center justify-center transform -translate-x-1/2 -translate-y-1/2 will-change-transform">
    <img src="images/logo.png" alt="" class="w-10 h-10 object-cover rounded-full filter drop-shadow-[0_0_8px_rgba(0,212,255,0.8)] pointer-events-none">
  </div>
  <div class="toast-container" id="toastContainer"></div>

  <div class="app-layout relative z-10">
    <aside class="sidebar">
      <a href="index.html" class="sidebar-logo">
        <img src="https://ui-avatars.com/api/?name=GZ&background=1877f2&color=fff&bold=true" alt="logo">
        <span>GENZ<em>TECH</em></span>
      </a>
      <nav class="sidebar-nav">
        <div class="nav-group-label">T·ªïng Quan</div>
        <a href="maindashboard.html" class="nav-item"><i class="bi bi-grid-1x2-fill"></i> Dashboard</a>
        <div class="nav-group-label">C√¥ng C·ª•</div>
        <a href="auto-post.html" class="nav-item"><i class="bi bi-send"></i> T·ª± ƒê·ªông ƒêƒÉng B√†i</a>
        <a href="ads-assistant.html" class="nav-item" onclick="toggleSubNav(event,'subNavAds')">
          <i class="bi bi-megaphone"></i> Tr·ª£ L√Ω Qu·∫£ng C√°o
          <i class="bi bi-chevron-down" id="subNavAdsArrow" style="margin-left:auto;font-size:11px;transition:transform .2s"></i>
        </a>
        <div id="subNavAds" style="display:flex;flex-direction:column">
          <a href="tool-ad-account.html" class="nav-sub-item"><i class="bi bi-shield-check"></i> Ki·ªÉm Tra TKQC</a>
          <a href="tool-fb-id.html" class="nav-sub-item"><i class="bi bi-person-badge"></i> T√¨m Facebook ID</a>
          <a href="tool-budget.html" class="nav-sub-item"><i class="bi bi-graph-up-arrow"></i> Ph√¢n T√≠ch Ng√¢n S√°ch</a>
          <a href="tool-translate.html" class="nav-sub-item"><i class="bi bi-translate"></i> D·ªãch Thu·∫≠t</a>
          <a href="tool-ads-finder.html" class="nav-sub-item"><i class="bi bi-binoculars"></i> Ads Finder</a>
          <a href="tool-policy.html" class="nav-sub-item active"><i class="bi bi-journal-text"></i> Ch√≠nh S√°ch FB</a>
          <a href="tool-cookie.html" class="nav-sub-item"><i class="bi bi-cookie"></i> Qu·∫£n L√Ω Cookie</a>
        </div>
        <a href="#" class="nav-item" onclick="openSettings()"><i class="bi bi-gear"></i> C√†i ƒê·∫∑t</a>
      </nav>
      <div class="sidebar-footer">
      <div id="gtUserSidebar" style="display:none"></div>
        <div class="conn-status" id="connStatus">
          <div class="conn-dot" id="connDot"></div>
          <span id="connText">Ch∆∞a k·∫øt n·ªëi</span>
        </div>
      </div>
    </aside>

    <div class="main-content">
      <header class="topbar">
        <div class="breadcrumb">
          <i class="bi bi-house"></i><i class="bi bi-chevron-right" style="font-size:10px"></i>
          <a href="ads-assistant.html" style="color:rgba(255,255,255,.4);text-decoration:none">Tr·ª£ L√Ω QC</a>
          <i class="bi bi-chevron-right" style="font-size:10px"></i><span>Ch√≠nh S√°ch Facebook</span>
        </div>
        <div style="display:flex;gap:10px;align-items:center">
          <div id="userBadge" style="display:none;align-items:center;gap:8px;font-size:12.5px"></div>
          <a href="https://www.facebook.com/policies/ads/" target="_blank" class="btn-sm btn-outline"><i class="bi bi-box-arrow-up-right"></i> Xem ch√≠nh s√°ch g·ªëc</a>
          <a href="https://www.facebook.com/business/help/appeals" target="_blank" class="btn-sm btn-primary"><i class="bi bi-megaphone"></i> Kh√°ng ngh·ªã</a>
        </div>
      </header>

      <main class="page-body">
        <h1 class="page-title"><i class="bi bi-journal-text" style="color:#38bdf8"></i> Ch√≠nh S√°ch Qu·∫£ng C√°o Facebook</h1>
        <p class="page-subtitle">T·ªïng h·ª£p v√† c·∫≠p nh·∫≠t c√°c ch√≠nh s√°ch quan tr·ªçng nh·∫•t. Ki·ªÉm tra n·ªôi dung qu·∫£ng c√°o tr∆∞·ªõc khi ch·∫°y ƒë·ªÉ tr√°nh vi ph·∫°m</p>

        <!-- AI Content checker -->
        <div class="card">
          <div class="card-header">
            <div class="card-title"><i class="bi bi-shield-check" style="color:#38bdf8"></i> Ki·ªÉm Tra Vi Ph·∫°m Ch√≠nh S√°ch (AI)</div>
            <div style="display:flex;gap:8px">
              <button class="btn-sm btn-outline" onclick="loadSampleAd()"><i class="bi bi-lightning"></i> M·∫´u</button>
              <button class="btn-sm btn-primary" onclick="checkPolicyAI()"><i class="bi bi-cpu"></i> Ki·ªÉm Tra AI</button>
            </div>
          </div>
          <div class="card-body">
            <div class="ai-checker-grid">
              <!-- Form nh·∫≠p -->
              <div>
                <div style="margin-bottom:14px">
                  <label class="form-label-ai">Ng√†nh h√†ng <span>Ch·ªçn ng√†nh ƒë·ªÉ AI ph√¢n t√≠ch ƒë√∫ng quy t·∫Øc ri√™ng</span></label>
                  <select class="form-ctrl" id="aiIndustry">
                    <option value="">-- Ch·ªçn ng√†nh h√†ng --</option>
                    <option value="Th·ªùi trang & Ph·ª• ki·ªán">Th·ªùi trang & Ph·ª• ki·ªán</option>
                    <option value="S·ª©c kh·ªèe & L√†m ƒë·∫πp">S·ª©c kh·ªèe & L√†m ƒë·∫πp</option>
                    <option value="Th·ª±c ph·∫©m ch·ª©c nƒÉng">Th·ª±c ph·∫©m ch·ª©c nƒÉng</option>
                    <option value="M·ªπ ph·∫©m">M·ªπ ph·∫©m</option>
                    <option value="·∫®m th·ª±c & ƒê·ªì u·ªëng">·∫®m th·ª±c & ƒê·ªì u·ªëng</option>
                    <option value="B·∫•t ƒë·ªông s·∫£n">B·∫•t ƒë·ªông s·∫£n</option>
                    <option value="Gi√°o d·ª•c & ƒê√†o t·∫°o">Gi√°o d·ª•c & ƒê√†o t·∫°o</option>
                    <option value="T√†i ch√≠nh & ƒê·∫ßu t∆∞">T√†i ch√≠nh & ƒê·∫ßu t∆∞</option>
                    <option value="C√¥ng ngh·ªá & Ph·∫ßn m·ªÅm">C√¥ng ngh·ªá & Ph·∫ßn m·ªÅm</option>
                    <option value="Th·ªÉ thao & Gi·∫£i tr√≠">Th·ªÉ thao & Gi·∫£i tr√≠</option>
                    <option value="D·ªãch v·ª• kh√°c">D·ªãch v·ª• kh√°c</option>
                  </select>
                </div>
                <div style="margin-bottom:14px">
                  <label class="form-label-ai">N·ªôi dung qu·∫£ng c√°o <span>D√°n to√†n b·ªô text: ti√™u ƒë·ªÅ, m√¥ t·∫£, CTA, hashtag</span></label>
                  <textarea class="form-ctrl" id="aiAdText" placeholder="V√≠ d·ª•:&#10;üî• GI·∫¢M C√ÇN SI√äU T·ªêC - Ch·ªâ 7 ng√†y gi·∫£m 5kg!&#10;‚úÖ 100% t·ª± nhi√™n, kh√¥ng t√°c d·ª•ng ph·ª•&#10;‚úÖ ƒê∆∞·ª£c b√°c sƒ© khuy√™n d√πng&#10;üìû Li√™n h·ªá ngay ƒë·ªÉ ƒë∆∞·ª£c t∆∞ v·∫•n MI·ªÑN PH√ç"></textarea>
                  <div class="hint-text">C√†ng nhi·ªÅu n·ªôi dung ‚Üí AI ph√¢n t√≠ch c√†ng ch√≠nh x√°c</div>
                </div>
                <div style="margin-bottom:14px">
                  <label class="form-label-ai">URL h√¨nh ·∫£nh <span>T√πy ch·ªçn ‚Äî ƒë·ªÉ AI ki·ªÉm tra h√¨nh ·∫£nh</span></label>
                  <input type="text" class="form-ctrl" id="aiImageUrl" placeholder="https://example.com/image.jpg" oninput="onAiImageUrl()">
                  <div class="upload-zone" id="aiUploadZone">
                    <input type="file" accept="image/*" onchange="onAiFileSelect(event)">
                    <i class="bi bi-cloud-upload"></i>
                    <p>K√©o th·∫£ ho·∫∑c click ƒë·ªÉ t·∫£i ·∫£nh l√™n</p>
                  </div>
                  <img id="aiImgPreview" class="img-prev" alt="Preview">
                </div>
                <div style="margin-bottom:14px">
                  <label class="form-label-ai">Ghi ch√∫ th√™m <span>T√πy ch·ªçn</span></label>
                  <textarea class="form-ctrl" id="aiNotes" placeholder="V√≠ d·ª•: S·∫£n ph·∫©m c√≥ gi·∫•y ph√©p ATTP s·ªë..., ƒê√¢y l√† retargeting..." style="min-height:60px"></textarea>
                </div>
                <button class="btn-sm btn-primary" style="width:100%;padding:10px;justify-content:center" onclick="checkPolicyAI()">
                  <i class="bi bi-cpu"></i> Ki·ªÉm Tra Vi Ph·∫°m B·∫±ng AI
                </button>
              </div>
              <!-- K·∫øt qu·∫£ AI -->
              <div id="aiResultArea">
                <div id="aiDefaultState" class="ai-empty">
                  <i class="bi bi-shield-check"></i>
                  <p style="font-size:13.5px;color:rgba(255,255,255,.35)">Nh·∫≠p n·ªôi dung v√† nh·∫•n<br><strong style="color:rgba(255,255,255,.5)">Ki·ªÉm Tra AI</strong></p>
                  <p style="font-size:12px;margin-top:6px">AI ph√¢n t√≠ch t·ª´ng t·ª´ ng·ªØ v√† h√¨nh ·∫£nh<br>theo ch√≠nh s√°ch Meta m·ªõi nh·∫•t</p>
                </div>
                <div id="aiAnalyzingState" class="ai-analyzing">
                  <div class="ai-spin"></div>
                  <div>
                    <div style="font-size:14px;font-weight:700;margin-bottom:5px">ƒêang ph√¢n t√≠ch...</div>
                    <div style="font-size:12px;color:rgba(255,255,255,.35)" id="aiStep">AI ƒëang ƒë·ªçc n·ªôi dung</div>
                  </div>
                </div>
                <div id="aiResultContent" style="display:none">
                  <div class="ai-score-wrap">
                    <div class="ai-score-ring" id="aiScoreRing">
                      <span class="snum" id="aiScoreNum">--</span>
                      <span class="slbl">/ 100</span>
                    </div>
                    <div class="verdict-pill" id="aiVerdictPill">--</div>
                    <p id="aiSummary" style="font-size:12.5px;color:rgba(255,255,255,.55);line-height:1.6;text-align:left"></p>
                  </div>
                  <div style="margin-bottom:14px">
                    <div class="sbar-wrap">
                      <div class="sbar-lbl">
                        <span style="color:rgba(255,255,255,.45)"><i class="bi bi-type"></i> VƒÉn b·∫£n</span>
                        <span id="aiTextScore" style="font-weight:700"></span>
                      </div>
                      <div class="sbar-track"><div class="sbar-fill" id="aiTextBar" style="width:0%"></div></div>
                    </div>
                    <div class="sbar-wrap">
                      <div class="sbar-lbl">
                        <span style="color:rgba(255,255,255,.45)"><i class="bi bi-image"></i> H√¨nh ·∫£nh</span>
                        <span id="aiImgScore" style="font-weight:700"></span>
                      </div>
                      <div class="sbar-track"><div class="sbar-fill" id="aiImgBar" style="width:0%"></div></div>
                    </div>
                  </div>
                  <div id="aiTextVioSection">
                    <div class="sec-hdr"><i class="bi bi-type"></i> Vi Ph·∫°m VƒÉn B·∫£n</div>
                    <div id="aiTextVio"></div>
                  </div>
                  <div id="aiImgVioSection">
                    <div class="sec-hdr"><i class="bi bi-image"></i> Vi Ph·∫°m H√¨nh ·∫¢nh</div>
                    <div id="aiImgVio"></div>
                  </div>
                  <div id="aiIndSection">
                    <div class="sec-hdr"><i class="bi bi-building"></i> Quy T·∫Øc Ng√†nh ƒê·∫∑c Bi·ªát</div>
                    <div id="aiIndVio"></div>
                  </div>
                  <div>
                    <div class="sec-hdr"><i class="bi bi-lightbulb"></i> ƒê·ªÅ Xu·∫•t H√†nh ƒê·ªông</div>
                    <div id="aiRecs"></div>
                  </div>
                  <div style="display:flex;gap:8px;margin-top:14px">
                    <button class="btn-sm btn-outline" style="flex:1" onclick="copyAiReport()"><i class="bi bi-clipboard"></i> Copy b√°o c√°o</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Policy categories -->
        <div style="display:flex;gap:10px;flex-wrap:wrap;margin-bottom:16px">
          <button class="btn-sm btn-outline" onclick="filterPolicy('all')" id="filterAll" style="border-color:rgba(255,255,255,.3);color:#fff">T·∫•t c·∫£</button>
          <button class="btn-sm btn-outline" onclick="filterPolicy('danger')" style="border-color:rgba(239,68,68,.4);color:#f87171">üö´ C·∫•m ho√†n to√†n</button>
          <button class="btn-sm btn-outline" onclick="filterPolicy('warning')" style="border-color:rgba(251,191,36,.4);color:#fbbf24">‚ö†Ô∏è H·∫°n ch·∫ø</button>
          <button class="btn-sm btn-outline" onclick="filterPolicy('info')" style="border-color:rgba(96,165,250,.4);color:#60a5fa">‚ÑπÔ∏è C·∫ßn l∆∞u √Ω</button>
          <button class="btn-sm btn-outline" onclick="filterPolicy('success')" style="border-color:rgba(34,197,94,.4);color:#4ade80">‚úÖ ƒê∆∞·ª£c ph√©p</button>
        </div>

        <div class="policy-grid" id="policyGrid"></div>

        <!-- Recent updates -->
        <div class="card">
          <div class="card-header"><div class="card-title"><i class="bi bi-bell"></i> C·∫≠p Nh·∫≠t Ch√≠nh S√°ch G·∫ßn ƒê√¢y</div></div>
          <div class="card-body">
            <div id="recentUpdates"></div>
          </div>
        </div>

      </main>
    </div>
  </div>

  <script src="js/ads-shared.js"></script>
  <script>
  const POLICIES = [
    {
      id: 'health', type: 'danger', icon: 'üè•', title: 'S·∫£n ph·∫©m s·ª©c kh·ªèe & gi·∫£m c√¢n',
      desc: 'Nghi√™m c·∫•m qu·∫£ng c√°o h·ª©a h·∫πn k·∫øt qu·∫£ phi th·ª±c t·∫ø v·ªÅ s·ª©c kh·ªèe, gi·∫£m c√¢n, hay ch·ªØa b·ªánh.',
      badge: 'C·∫•m ho√†n to√†n',
      detail: {
        dont: ['Gi·∫£m X kg trong Y ng√†y', 'Ch·ªØa kh·ªèi b·ªánh X', 'Cam k·∫øt 100% hi·ªáu qu·∫£', 'Tr∆∞·ªõc/sau v·ªõi k·∫øt qu·∫£ phi th·ª±c t·∫ø', 'Th·ª±c ph·∫©m ch·ª©c nƒÉng kh√¥ng c√≥ gi·∫•y ph√©p'],
        do: ['M√¥ t·∫£ th√†nh ph·∫ßn s·∫£n ph·∫©m', 'Chia s·∫ª l·ª£i √≠ch d·ª±a tr√™n nghi√™n c·ª©u khoa h·ªçc', 'C√≥ disclaimer r√µ r√†ng', 'S·∫£n ph·∫©m c√≥ gi·∫•y ph√©p l∆∞u h√†nh']
      }
    },
    {
      id: 'financial', type: 'danger', icon: 'üí∞', title: 'D·ªãch v·ª• t√†i ch√≠nh & ƒë·∫ßu t∆∞',
      desc: 'C·∫•m qu·∫£ng c√°o h·ª©a h·∫πn l·ª£i nhu·∫≠n ƒë·∫£m b·∫£o, s·∫£n ph·∫©m t√†i ch√≠nh kh√¥ng ƒë∆∞·ª£c c·∫•p ph√©p.',
      badge: 'C·∫•m ho√†n to√†n',
      detail: {
        dont: ['L·ª£i nhu·∫≠n X%/ng√†y ƒë·∫£m b·∫£o', 'Kh√¥ng r·ªßi ro', 'Forex/crypto kh√¥ng ƒë∆∞·ª£c c·∫•p ph√©p', 'M√¥ h√¨nh ƒëa c·∫•p', 'Vay n·∫∑ng l√£i'],
        do: ['D·ªãch v·ª• t√†i ch√≠nh ƒë∆∞·ª£c c·∫•p ph√©p', 'C√≥ disclaimer v·ªÅ r·ªßi ro', 'L√£i su·∫•t minh b·∫°ch', 'Tu√¢n th·ªß quy ƒë·ªãnh ƒë·ªãa ph∆∞∆°ng']
      }
    },
    {
      id: 'adult', type: 'danger', icon: 'üîû', title: 'N·ªôi dung ng∆∞·ªùi l·ªõn',
      desc: 'C·∫•m ho√†n to√†n n·ªôi dung khi√™u d√¢m, g·ª£i d·ª•c, hay nh·∫Øm m·ª•c ti√™u v√†o ng∆∞·ªùi d∆∞·ªõi 18 tu·ªïi.',
      badge: 'C·∫•m ho√†n to√†n',
      detail: {
        dont: ['H√¨nh ·∫£nh kh·ªèa th√¢n/g·ª£i d·ª•c', 'N·ªôi dung t√¨nh d·ª•c', 'Nh·∫Øm ƒë·∫øn tr·∫ª em', 'S·∫£n ph·∫©m ng∆∞·ªùi l·ªõn kh√¥ng ƒë∆∞·ª£c ph√©p'],
        do: ['Qu·∫£ng c√°o s·∫£n ph·∫©m ng∆∞·ªùi l·ªõn ƒë∆∞·ª£c ph√©p v·ªõi ƒë·ªëi t∆∞·ª£ng 18+', 'N·ªôi dung ph√π h·ª£p v·ªõi ƒë·ªëi t∆∞·ª£ng']
      }
    },
    {
      id: 'drugs', type: 'danger', icon: 'üíä', title: 'Thu·ªëc & ch·∫•t c·∫•m',
      desc: 'C·∫•m qu·∫£ng c√°o thu·ªëc k√™ ƒë∆°n kh√¥ng c√≥ ph√©p, ch·∫•t g√¢y nghi·ªán, v√† s·∫£n ph·∫©m li√™n quan.',
      badge: 'C·∫•m ho√†n to√†n',
      detail: {
        dont: ['Thu·ªëc k√™ ƒë∆°n kh√¥ng c√≥ ph√©p', 'Ma t√∫y v√† ch·∫•t c·∫•m', 'S·∫£n ph·∫©m gi·∫£ m·∫°o d∆∞·ª£c ph·∫©m', 'B√°n thu·ªëc online kh√¥ng ph√©p'],
        do: ['Nh√† thu·ªëc c√≥ gi·∫•y ph√©p', 'Th·ª±c ph·∫©m ch·ª©c nƒÉng h·ª£p l·ªá', 'Thi·∫øt b·ªã y t·∫ø ƒë∆∞·ª£c c·∫•p ph√©p']
      }
    },
    {
      id: 'misleading', type: 'warning', icon: '‚ö†Ô∏è', title: 'N·ªôi dung g√¢y hi·ªÉu l·∫ßm',
      desc: 'H·∫°n ch·∫ø c√°c tuy√™n b·ªë ph√≥ng ƒë·∫°i, so s√°nh kh√¥ng c√≥ c∆° s·ªü, ho·∫∑c th√¥ng tin sai l·ªách.',
      badge: 'H·∫°n ch·∫ø',
      detail: {
        dont: ['S·ªë 1 Vi·ªát Nam (kh√¥ng c√≥ b·∫±ng ch·ª©ng)', 'T·ªët nh·∫•t/r·∫ª nh·∫•t (kh√¥ng c√≥ c∆° s·ªü)', 'Th·ªëng k√™ gi·∫£ m·∫°o', 'ƒê√°nh gi√° fake', 'H√¨nh ·∫£nh ch·ªânh s·ª≠a g√¢y hi·ªÉu l·∫ßm'],
        do: ['Tuy√™n b·ªë c√≥ d·∫´n ch·ª©ng c·ª• th·ªÉ', 'So s√°nh d·ª±a tr√™n d·ªØ li·ªáu th·ª±c', 'ƒê√°nh gi√° th·∫≠t t·ª´ kh√°ch h√†ng', 'H√¨nh ·∫£nh s·∫£n ph·∫©m th·ª±c t·∫ø']
      }
    },
    {
      id: 'political', type: 'warning', icon: 'üó≥Ô∏è', title: 'N·ªôi dung ch√≠nh tr·ªã & x√£ h·ªôi',
      desc: 'Qu·∫£ng c√°o ch√≠nh tr·ªã c·∫ßn x√°c minh danh t√≠nh v√† tu√¢n th·ªß quy ƒë·ªãnh v·ªÅ minh b·∫°ch.',
      badge: 'H·∫°n ch·∫ø',
      detail: {
        dont: ['Qu·∫£ng c√°o ch√≠nh tr·ªã kh√¥ng x√°c minh', 'N·ªôi dung g√¢y chia r·∫Ω x√£ h·ªôi', 'Tin t·ª©c gi·∫£ m·∫°o', 'K√™u g·ªçi b·∫°o l·ª±c'],
        do: ['X√°c minh danh t√≠nh cho qu·∫£ng c√°o ch√≠nh tr·ªã', 'Th√™m "ƒê∆∞·ª£c t√†i tr·ª£ b·ªüi" r√µ r√†ng', 'N·ªôi dung trung l·∫≠p v√† kh√°ch quan']
      }
    },
    {
      id: 'gambling', type: 'warning', icon: 'üé∞', title: 'C·ªù b·∫°c & tr√≤ ch∆°i c√≥ th∆∞·ªüng',
      desc: 'Ch·ªâ ƒë∆∞·ª£c ph√©p t·∫°i c√°c qu·ªëc gia c√≥ quy ƒë·ªãnh cho ph√©p v√† ph·∫£i c√≥ gi·∫•y ph√©p h·ª£p l·ªá.',
      badge: 'H·∫°n ch·∫ø',
      detail: {
        dont: ['C·ªù b·∫°c online kh√¥ng ph√©p t·∫°i VN', 'H·ª©a h·∫πn th·∫Øng ti·ªÅn', 'Nh·∫Øm ƒë·∫øn ng∆∞·ªùi d∆∞·ªõi 18 tu·ªïi'],
        do: ['C√≥ gi·∫•y ph√©p t·∫°i qu·ªëc gia ƒë∆∞·ª£c ph√©p', 'C√≥ c·∫£nh b√°o v·ªÅ c·ªù b·∫°c c√≥ tr√°ch nhi·ªám', 'Tu√¢n th·ªß quy ƒë·ªãnh ƒë·ªãa ph∆∞∆°ng']
      }
    },
    {
      id: 'targeting', type: 'info', icon: 'üéØ', title: 'Nh·∫Øm m·ª•c ti√™u ƒë·∫∑c bi·ªát',
      desc: 'Kh√¥ng ƒë∆∞·ª£c ph√¢n bi·ªát ƒë·ªëi x·ª≠ d·ª±a tr√™n ch·ªßng t·ªôc, t√¥n gi√°o, gi·ªõi t√≠nh, tu·ªïi t√°c trong m·ªôt s·ªë lƒ©nh v·ª±c.',
      badge: 'C·∫ßn l∆∞u √Ω',
      detail: {
        dont: ['Nh·∫Øm m·ª•c ti√™u ph√¢n bi·ªát ch·ªßng t·ªôc trong t√≠n d·ª•ng/nh√† ·ªü/vi·ªác l√†m', 'Lo·∫°i tr·ª´ nh√≥m d√¢n s·ªë ƒë∆∞·ª£c b·∫£o v·ªá', 'N·ªôi dung ph√¢n bi·ªát ƒë·ªëi x·ª≠'],
        do: ['Nh·∫Øm m·ª•c ti√™u theo s·ªü th√≠ch v√† h√†nh vi', 'Lookalike audience h·ª£p l·ªá', 'Retargeting kh√°ch h√†ng c≈©']
      }
    },
    {
      id: 'ecommerce', type: 'success', icon: 'üõçÔ∏è', title: 'Th∆∞∆°ng m·∫°i ƒëi·ªán t·ª≠',
      desc: 'ƒê∆∞·ª£c ph√©p qu·∫£ng c√°o s·∫£n ph·∫©m h·ª£p l·ªá v·ªõi h√¨nh ·∫£nh th·ª±c t·∫ø v√† th√¥ng tin ch√≠nh x√°c.',
      badge: 'ƒê∆∞·ª£c ph√©p',
      detail: {
        do: ['S·∫£n ph·∫©m c√≥ ngu·ªìn g·ªëc r√µ r√†ng', 'H√¨nh ·∫£nh th·ª±c t·∫ø c·ªßa s·∫£n ph·∫©m', 'Gi√° c·∫£ minh b·∫°ch', 'Ch√≠nh s√°ch ƒë·ªïi tr·∫£ r√µ r√†ng', 'Th√¥ng tin li√™n h·ªá ƒë·∫ßy ƒë·ªß'],
        dont: ['H√†ng gi·∫£, h√†ng nh√°i', 'S·∫£n ph·∫©m vi ph·∫°m b·∫£n quy·ªÅn', 'Gi√° ·∫£o (g·∫°ch gi√° cao r·ªìi gi·∫£m gi·∫£ t·∫°o)']
      }
    },
    {
      id: 'education', type: 'success', icon: 'üìö', title: 'Gi√°o d·ª•c & kh√≥a h·ªçc',
      desc: 'ƒê∆∞·ª£c ph√©p v·ªõi ƒëi·ªÅu ki·ªán th√¥ng tin v·ªÅ kh√≥a h·ªçc, ch·ª©ng ch·ªâ v√† k·∫øt qu·∫£ ph·∫£i ch√≠nh x√°c.',
      badge: 'ƒê∆∞·ª£c ph√©p',
      detail: {
        do: ['M√¥ t·∫£ kh√≥a h·ªçc ch√≠nh x√°c', 'Ch·ª©ng ch·ªâ h·ª£p l·ªá', 'K·∫øt qu·∫£ h·ªçc vi√™n th·ª±c t·∫ø', 'Gi·∫£ng vi√™n c√≥ chuy√™n m√¥n'],
        dont: ['H·ª©a h·∫πn vi·ªác l√†m 100%', 'B·∫±ng c·∫•p gi·∫£ m·∫°o', 'K·∫øt qu·∫£ phi th·ª±c t·∫ø']
      }
    },
    {
      id: 'food', type: 'info', icon: 'üçú', title: 'Th·ª±c ph·∫©m & ƒë·ªì u·ªëng',
      desc: 'C·∫ßn tu√¢n th·ªß quy ƒë·ªãnh v·ªÅ nh√£n m√°c, th√†nh ph·∫ßn v√† kh√¥ng ƒë∆∞·ª£c qu·∫£ng c√°o sai s·ª± th·∫≠t.',
      badge: 'C·∫ßn l∆∞u √Ω',
      detail: {
        do: ['Th√†nh ph·∫ßn r√µ r√†ng', 'H√¨nh ·∫£nh th·ª±c t·∫ø', 'Th√¥ng tin dinh d∆∞·ª°ng ch√≠nh x√°c', 'C√≥ gi·∫•y ph√©p an to√†n th·ª±c ph·∫©m'],
        dont: ['Tuy√™n b·ªë ch·ªØa b·ªánh', 'Th√†nh ph·∫ßn kh√¥ng ƒë∆∞·ª£c ph√©p', 'H√¨nh ·∫£nh ch·ªânh s·ª≠a qu√° m·ª©c']
      }
    },
    {
      id: 'beauty', type: 'info', icon: 'üíÑ', title: 'M·ªπ ph·∫©m & l√†m ƒë·∫πp',
      desc: 'ƒê∆∞·ª£c ph√©p nh∆∞ng kh√¥ng ƒë∆∞·ª£c h·ª©a h·∫πn k·∫øt qu·∫£ phi th·ª±c t·∫ø ho·∫∑c qu·∫£ng c√°o s·∫£n ph·∫©m kh√¥ng c√≥ ph√©p.',
      badge: 'C·∫ßn l∆∞u √Ω',
      detail: {
        do: ['S·∫£n ph·∫©m c√≥ gi·∫•y ph√©p l∆∞u h√†nh', 'H√¨nh ·∫£nh tr∆∞·ªõc/sau th·ª±c t·∫ø', 'Th√†nh ph·∫ßn r√µ r√†ng', 'Kh√¥ng g√¢y d·ªã ·ª©ng'],
        dont: ['H·ª©a h·∫πn tr·∫ª h√≥a 20 tu·ªïi', 'Tr∆∞·ªõc/sau ch·ªânh s·ª≠a', 'S·∫£n ph·∫©m kh√¥ng c√≥ ph√©p', 'Tuy√™n b·ªë y t·∫ø kh√¥ng c√≥ c∆° s·ªü']
      }
    }
  ];

  const VIOLATIONS = [
    { pattern: /gi·∫£m\s*\d+\s*kg/i, type: 'fail', label: 'Tuy√™n b·ªë gi·∫£m c√¢n c·ª• th·ªÉ', detail: 'Facebook c·∫•m qu·∫£ng c√°o h·ª©a h·∫πn gi·∫£m X kg trong Y ng√†y' },
    { pattern: /cam k·∫øt.*%.*hi·ªáu qu·∫£|ƒë·∫£m b·∫£o.*hi·ªáu qu·∫£/i, type: 'fail', label: 'Cam k·∫øt hi·ªáu qu·∫£ 100%', detail: 'Kh√¥ng ƒë∆∞·ª£c ƒë·∫£m b·∫£o k·∫øt qu·∫£ tuy·ªát ƒë·ªëi' },
    { pattern: /ch·ªØa\s*(kh·ªèi|b·ªánh|d·ª©t)/i, type: 'fail', label: 'Tuy√™n b·ªë ch·ªØa b·ªánh', detail: 'C·∫•m tuy√™n b·ªë ch·ªØa kh·ªèi b·ªánh trong qu·∫£ng c√°o' },
    { pattern: /l·ª£i nhu·∫≠n.*%.*ng√†y|x\d+.*l·ª£i nhu·∫≠n/i, type: 'fail', label: 'H·ª©a h·∫πn l·ª£i nhu·∫≠n ƒë·∫£m b·∫£o', detail: 'C·∫•m qu·∫£ng c√°o ƒë·∫ßu t∆∞ v·ªõi l·ª£i nhu·∫≠n ƒë·∫£m b·∫£o' },
    { pattern: /s·ªë\s*1\s*(vi·ªát nam|vn|to√†n qu·ªëc)/i, type: 'warn', label: 'Tuy√™n b·ªë "S·ªë 1"', detail: 'C·∫ßn c√≥ b·∫±ng ch·ª©ng c·ª• th·ªÉ ƒë·ªÉ s·ª≠ d·ª•ng tuy√™n b·ªë n√†y' },
    { pattern: /mi·ªÖn ph√≠.*m√£i m√£i|free.*forever/i, type: 'warn', label: 'Tuy√™n b·ªë mi·ªÖn ph√≠ m√£i m√£i', detail: 'C·∫ßn l√†m r√µ ƒëi·ªÅu ki·ªán √°p d·ª•ng' },
    { pattern: /click.*ngay|mua.*ngay|ƒë·∫∑t.*ngay/i, type: 'pass', label: 'Call-to-action r√µ r√†ng', detail: 'CTA c·ª• th·ªÉ ƒë∆∞·ª£c khuy·∫øn kh√≠ch' },
    { pattern: /\d+[,.]?\d*\s*(vnƒë|ƒë·ªìng|k|ngh√¨n)/i, type: 'pass', label: 'Gi√° c·∫£ minh b·∫°ch', detail: 'Hi·ªÉn th·ªã gi√° r√µ r√†ng l√† d·∫•u hi·ªáu t·ªët' },
    { pattern: /giao h√†ng.*mi·ªÖn ph√≠|free ship/i, type: 'pass', label: 'Ch√≠nh s√°ch giao h√†ng r√µ r√†ng', detail: 'Th√¥ng tin giao h√†ng minh b·∫°ch ƒë∆∞·ª£c ƒë√°nh gi√° cao' },
  ];

  const AI_BACKEND = 'https://genztech-production.up.railway.app';
  let aiUploadedImg = null;

  function onAiImageUrl() {
    const url = document.getElementById('aiImageUrl').value.trim();
    const prev = document.getElementById('aiImgPreview');
    if (url) { prev.src = url; prev.style.display = 'block'; }
    else prev.style.display = 'none';
  }

  function onAiFileSelect(e) {
    const file = e.target.files[0];
    if (!file) return;
    if (file.size > 10*1024*1024) { GZ.toast('·∫¢nh qu√° l·ªõn (t·ªëi ƒëa 10MB)', 'error'); return; }
    const reader = new FileReader();
    reader.onload = ev => {
      // N√©n ·∫£nh xu·ªëng max 800px ƒë·ªÉ tr√°nh timeout khi g·ª≠i l√™n server
      const img = new Image();
      img.onload = () => {
        const MAX = 800;
        let w = img.width, h = img.height;
        if (w > MAX || h > MAX) {
          if (w > h) { h = Math.round(h * MAX / w); w = MAX; }
          else { w = Math.round(w * MAX / h); h = MAX; }
        }
        const canvas = document.createElement('canvas');
        canvas.width = w; canvas.height = h;
        canvas.getContext('2d').drawImage(img, 0, 0, w, h);
        aiUploadedImg = canvas.toDataURL('image/jpeg', 0.85);
        const prev = document.getElementById('aiImgPreview');
        prev.src = aiUploadedImg; prev.style.display = 'block';
        document.getElementById('aiImageUrl').value = '';
        GZ.toast('ƒê√£ t·∫£i ·∫£nh (' + w + 'x' + h + 'px)');
      };
      img.src = ev.target.result;
    };
    reader.readAsDataURL(file);
  }

  function loadSampleAd() {
    document.getElementById('aiIndustry').value = 'Th·ª±c ph·∫©m ch·ª©c nƒÉng';
    document.getElementById('aiAdText').value = 'üî• GI·∫¢M C√ÇN SI√äU T·ªêC - Ch·ªâ 7 ng√†y gi·∫£m 5kg!\n‚úÖ 100% t·ª± nhi√™n, kh√¥ng t√°c d·ª•ng ph·ª•\n‚úÖ ƒê∆∞·ª£c b√°c sƒ© khuy√™n d√πng\nüìû Li√™n h·ªá ngay ƒë·ªÉ ƒë∆∞·ª£c t∆∞ v·∫•n MI·ªÑN PH√ç\n\n‚ö° Cam k·∫øt ho√†n ti·ªÅn 100% n·∫øu kh√¥ng gi·∫£m c√¢n!\nH√†ng ng√†n kh√°ch h√†ng ƒë√£ th√†nh c√¥ng!';
    GZ.toast('ƒê√£ ƒëi·ªÅn n·ªôi dung m·∫´u');
  }

  function getScoreCls(s) {
    if (s >= 85) return 'safe';
    if (s >= 65) return 'ok';
    if (s >= 40) return 'warn';
    return 'danger';
  }
  function getBarColor(s) {
    if (s >= 85) return '#4ade80';
    if (s >= 65) return '#38bdf8';
    if (s >= 40) return '#fbbf24';
    return '#f87171';
  }

  async function checkPolicyAI() {
    const text = document.getElementById('aiAdText').value.trim();
    const imgUrl = aiUploadedImg || document.getElementById('aiImageUrl').value.trim();
    const industry = document.getElementById('aiIndustry').value;
    const notes = document.getElementById('aiNotes').value.trim();
    if (!text && !imgUrl) { GZ.toast('Vui l√≤ng nh·∫≠p n·ªôi dung ho·∫∑c h√¨nh ·∫£nh', 'error'); return; }

    document.getElementById('aiDefaultState').style.display = 'none';
    document.getElementById('aiResultContent').style.display = 'none';
    document.getElementById('aiAnalyzingState').classList.add('show');

    const steps = ['ƒê·ªçc n·ªôi dung qu·∫£ng c√°o...','Ki·ªÉm tra t·ª´ ng·ªØ nh·∫°y c·∫£m...','Ph√¢n t√≠ch h√¨nh ·∫£nh...','So s√°nh ch√≠nh s√°ch Meta...','T·ªïng h·ª£p k·∫øt qu·∫£...'];
    let si = 0;
    const iv = setInterval(() => { if (si < steps.length) document.getElementById('aiStep').textContent = steps[si++]; }, 1600);

    try {
      const body = { text, industry, notes };
      if (imgUrl) body.image_url = imgUrl;
      const res = await fetch(AI_BACKEND + '/api/ai/check-policy', {
        method: 'POST', headers: {'Content-Type':'application/json'}, body: JSON.stringify(body)
      });
      const data = await res.json();
      clearInterval(iv);
      if (!res.ok || !data.success) throw new Error(data.error || 'L·ªói server');
      renderAiResult(data.analysis);
    } catch(e) {
      clearInterval(iv);
      document.getElementById('aiAnalyzingState').classList.remove('show');
      document.getElementById('aiDefaultState').style.display = 'flex';
      GZ.toast('L·ªói: ' + e.message, 'error');
    }
  }

  function renderAiResult(a) {
    document.getElementById('aiAnalyzingState').classList.remove('show');
    document.getElementById('aiResultContent').style.display = 'block';

    const score = a.overall_score || 0;
    const cls = getScoreCls(score);
    const ring = document.getElementById('aiScoreRing');
    ring.className = 'ai-score-ring ring-' + cls;
    document.getElementById('aiScoreNum').textContent = score;

    const pill = document.getElementById('aiVerdictPill');
    const pCls = cls;
    pill.className = 'verdict-pill pill-' + pCls;
    const icons = {safe:'‚úÖ',ok:'‚úîÔ∏è',warn:'‚ö†Ô∏è',danger:'üö´'};
    pill.innerHTML = (icons[pCls]||'‚ö†Ô∏è') + ' ' + (a.overall_verdict || '');
    document.getElementById('aiSummary').textContent = a.overall_summary || '';

    const ts = a.text_analysis?.score ?? score;
    const is = a.image_analysis?.score ?? 100;
    document.getElementById('aiTextScore').textContent = ts + '/100';
    document.getElementById('aiTextBar').style.cssText = 'width:' + ts + '%;background:' + getBarColor(ts);
    document.getElementById('aiImgScore').textContent = a.image_analysis?.has_image ? is + '/100' : 'Kh√¥ng c√≥ ·∫£nh';
    document.getElementById('aiImgBar').style.cssText = 'width:' + (a.image_analysis?.has_image ? is : 100) + '%;background:' + (a.image_analysis?.has_image ? getBarColor(is) : '#4ade80');

    const textV = a.text_analysis?.violations || [];
    document.getElementById('aiTextVio').innerHTML = textV.length === 0
      ? '<div class="no-vio"><i class="bi bi-check-circle-fill"></i> Kh√¥ng ph√°t hi·ªán vi ph·∫°m vƒÉn b·∫£n</div>'
      : textV.map(v => renderVioItem(v, true)).join('');

    const imgV = a.image_analysis?.violations || [];
    let imgHtml = '';
    // Hi·ªÉn th·ªã m√¥ t·∫£ ·∫£nh t·ª´ pre-scan n·∫øu c√≥
    if (a.image_analysis?.description) {
      imgHtml += '<div style="font-size:11.5px;color:rgba(255,255,255,.4);padding:7px 10px;background:rgba(255,255,255,.03);border-radius:6px;margin-bottom:8px;line-height:1.5"><i class="bi bi-eye" style="color:#38bdf8;margin-right:5px"></i><strong style="color:rgba(255,255,255,.55)">AI nh√¨n th·∫•y:</strong> ' + a.image_analysis.description + '</div>';
    }
    if (!a.image_analysis?.has_image) {
      imgHtml += '<div style="font-size:12px;color:rgba(255,255,255,.25);padding:6px 0">Kh√¥ng c√≥ h√¨nh ·∫£nh ƒë·ªÉ ph√¢n t√≠ch</div>';
    } else if (imgV.length === 0) {
      imgHtml += '<div class="no-vio"><i class="bi bi-check-circle-fill"></i> Kh√¥ng ph√°t hi·ªán vi ph·∫°m h√¨nh ·∫£nh</div>';
    } else {
      imgHtml += imgV.map(v => renderVioItem(v, false)).join('');
    }
    document.getElementById('aiImgVio').innerHTML = imgHtml;

    const indSpec = a.industry_specific || {};
    const indV = indSpec.violations || [];
    let indHtml = '';
    if (indSpec.industry) {
      indHtml += '<div style="font-size:12px;color:rgba(255,255,255,.45);margin-bottom:8px;padding:8px 10px;background:rgba(56,189,248,.06);border-radius:6px;border-left:2px solid #38bdf8"><strong style="color:#38bdf8">' + indSpec.industry + ':</strong> ' + (indSpec.special_rules || '') + '</div>';
    }
    if (indV.length === 0) {
      indHtml += '<div class="no-vio"><i class="bi bi-check-circle-fill"></i> Kh√¥ng vi ph·∫°m quy t·∫Øc ng√†nh ƒë·∫∑c bi·ªát</div>';
    } else {
      indHtml += indV.map(v => renderVioItem(v, true)).join('');
    }
    document.getElementById('aiIndVio').innerHTML = indHtml;

    const recs = a.recommendations || [];
    document.getElementById('aiRecs').innerHTML = recs.length === 0
      ? '<div class="no-vio"><i class="bi bi-check-circle-fill"></i> Qu·∫£ng c√°o ƒë·∫°t ti√™u chu·∫©n</div>'
      : recs.map(r => {
          const p = (r.priority||'LOW').toLowerCase();
          const ico = {high:'bi-exclamation-triangle-fill',medium:'bi-info-circle-fill',low:'bi-lightbulb'}[p]||'bi-lightbulb';
          return '<div class="rec-row rec-' + p + '"><div class="rec-ico"><i class="bi ' + ico + '"></i></div><div><div class="rec-act">' + (r.action||'') + '</div><div class="rec-imp">' + (r.impact||'') + '</div></div></div>';
        }).join('');
  }

  function renderVioItem(v, isText) {
    if (!v || typeof v !== 'object') return '';
    const sev = (v.severity || 'LOW').toLowerCase();
    const sevValid = ['critical','high','medium','low'].includes(sev) ? sev : 'low';
    const excerpt = isText ? (v.excerpt || '') : (v.details || '');
    const reason = v.reason || v.details || '';
    const vtype = v.type || '';
    if (!vtype && !reason) return ''; // b·ªè qua item r·ªóng
    return '<div class="vio-item vio-' + sevValid + '">' +
      '<div class="vio-head"><span class="sev-tag tag-' + sevValid + '">' + sevValid.toUpperCase() + '</span><span class="vio-type">' + vtype + '</span></div>' +
      (excerpt ? '<div class="vio-excerpt">"' + excerpt + '"</div>' : '') +
      (reason ? '<div class="vio-reason"><i class="bi bi-info-circle" style="color:rgba(255,255,255,.25)"></i> ' + reason + '</div>' : '') +
      (v.recommendation ? '<div class="vio-fix"><i class="bi bi-arrow-right-circle-fill"></i> ' + v.recommendation + '</div>' : '') +
      '</div>';
  }

  function copyAiReport() {
    const score = document.getElementById('aiScoreNum').textContent;
    const verdict = document.getElementById('aiVerdictPill').textContent;
    const summary = document.getElementById('aiSummary').textContent;
    let text = '=== B√ÅO C√ÅO KI·ªÇM TRA CH√çNH S√ÅCH FACEBOOK ADS ===\n\n';
    text += 'ƒêi·ªÉm an to√†n: ' + score + '/100 ‚Äî ' + verdict + '\n';
    text += 'T√≥m t·∫Øt: ' + summary + '\n';
    navigator.clipboard.writeText(text).then(() => GZ.toast('ƒê√£ copy b√°o c√°o'));
  }

  // Gi·ªØ l·∫°i h√†m checkContent c≈© (rule-based) ƒë·ªÉ kh√¥ng break g√¨
  function checkContent() { checkPolicyAI(); }

  function filterPolicy(type) {
    const cards = document.querySelectorAll('.policy-card');
    cards.forEach(c => {
      c.style.display = (type === 'all' || c.dataset.type === type) ? '' : 'none';
    });
  }

  function toggleDetail(id) {
    const detail = document.getElementById('detail_' + id);
    detail.classList.toggle('open');
  }

  function renderPolicies() {
    document.getElementById('policyGrid').innerHTML = POLICIES.map(p => {
      const badgeClass = { danger: 'badge-danger', warning: 'badge-warning', info: 'badge-info', success: 'badge-success' }[p.type];
      const doList = p.detail.do ? p.detail.do.map(d => `<li class="do">‚úÖ ${d}</li>`).join('') : '';
      const dontList = p.detail.dont ? p.detail.dont.map(d => `<li class="dont">‚ùå ${d}</li>`).join('') : '';
      return `<div class="policy-card ${p.type}" data-type="${p.type}">
        <div class="policy-icon">${p.icon}</div>
        <div class="policy-title">${p.title}</div>
        <div class="policy-desc">${p.desc}</div>
        <div style="display:flex;align-items:center;justify-content:space-between">
          <span class="policy-badge ${badgeClass}">${p.badge}</span>
          <button onclick="toggleDetail('${p.id}')" style="background:none;border:none;color:rgba(255,255,255,.4);cursor:pointer;font-size:12px">Chi ti·∫øt ‚ñæ</button>
        </div>
        <div class="policy-detail" id="detail_${p.id}">
          ${doList ? `<h4>‚úÖ ƒê∆∞·ª£c ph√©p:</h4><ul>${doList}</ul>` : ''}
          ${dontList ? `<h4 style="margin-top:10px">‚ùå Kh√¥ng ƒë∆∞·ª£c ph√©p:</h4><ul>${dontList}</ul>` : ''}
        </div>
      </div>`;
    }).join('');
  }

  function renderRecentUpdates() {
    const updates = [
      { date: '01/2026', title: 'Si·∫øt ch·∫∑t qu·∫£ng c√°o AI-generated content', desc: 'Facebook y√™u c·∫ßu g·∫Øn nh√£n r√µ r√†ng cho n·ªôi dung ƒë∆∞·ª£c t·∫°o b·ªüi AI trong qu·∫£ng c√°o.', type: 'warning' },
      { date: '12/2025', title: 'C·∫≠p nh·∫≠t ch√≠nh s√°ch qu·∫£ng c√°o t√†i ch√≠nh', desc: 'TƒÉng c∆∞·ªùng y√™u c·∫ßu x√°c minh cho qu·∫£ng c√°o d·ªãch v·ª• t√†i ch√≠nh t·∫°i ƒê√¥ng Nam √Å.', type: 'danger' },
      { date: '11/2025', title: 'Cho ph√©p qu·∫£ng c√°o CBD t·∫°i m·ªôt s·ªë qu·ªëc gia', desc: 'Facebook m·ªü r·ªông cho ph√©p qu·∫£ng c√°o s·∫£n ph·∫©m CBD h·ª£p ph√°p t·∫°i M·ªπ v√† Canada.', type: 'info' },
      { date: '10/2025', title: 'C·∫≠p nh·∫≠t ch√≠nh s√°ch nh·∫Øm m·ª•c ti√™u', desc: 'Lo·∫°i b·ªè m·ªôt s·ªë t√πy ch·ªçn nh·∫Øm m·ª•c ti√™u nh·∫°y c·∫£m li√™n quan ƒë·∫øn s·ª©c kh·ªèe v√† t√¥n gi√°o.', type: 'warning' },
    ];
    const colors = { danger: '#f87171', warning: '#fbbf24', info: '#60a5fa' };
    document.getElementById('recentUpdates').innerHTML = updates.map(u => `
      <div style="background:rgba(0,0,0,.2);border-radius:10px;padding:12px 14px;margin-bottom:8px;border-left:3px solid ${colors[u.type]}">
        <div style="display:flex;align-items:center;gap:10px;margin-bottom:4px">
          <span style="font-size:11px;background:rgba(255,255,255,.07);padding:2px 8px;border-radius:12px;color:rgba(255,255,255,.5)">${u.date}</span>
          <span style="font-size:13px;font-weight:700">${u.title}</span>
        </div>
        <div style="font-size:12px;color:rgba(255,255,255,.45)">${u.desc}</div>
      </div>`).join('');
  }

  document.addEventListener('DOMContentLoaded', () => { renderPolicies(); renderRecentUpdates(); });
  </script>
  

<script id="gz-universe-bg">
(function(){
  'use strict';
  const isMobile = /Mobi|Android/i.test(navigator.userAgent);

  // -- Stars Canvas --
  const cs = document.getElementById('gz-stars');
  if (!cs) return;
  const ctxS = cs.getContext('2d');
  function resizeS(){ cs.width=window.innerWidth; cs.height=window.innerHeight; }
  resizeS();
  const stars = [];
  const N = isMobile ? 80 : 180;
  for(let i=0;i<N;i++){
    stars.push({
      x: Math.random()*cs.width, y: Math.random()*cs.height,
      r: Math.random()*1.6+0.2,
      a: Math.random(), da: (Math.random()-0.5)*0.004,
      vx: (Math.random()-0.5)*0.07, vy: (Math.random()-0.5)*0.07,
      hue: [210,195,270,180][Math.floor(Math.random()*4)] // xanh d∆∞∆°ng, cyan, t√≠m, xanh l√°
    });
  }
  function animStars(){
    ctxS.clearRect(0,0,cs.width,cs.height);
    stars.forEach(s=>{
      s.x+=s.vx; s.y+=s.vy; s.a+=s.da;
      if(s.a<0.08) s.da=Math.abs(s.da);
      if(s.a>0.95) s.da=-Math.abs(s.da);
      if(s.x<0) s.x=cs.width; if(s.x>cs.width) s.x=0;
      if(s.y<0) s.y=cs.height; if(s.y>cs.height) s.y=0;
      const g=ctxS.createRadialGradient(s.x,s.y,0,s.x,s.y,s.r*2.5);
      g.addColorStop(0,`hsla(${s.hue},100%,90%,${s.a*0.9})`);
      g.addColorStop(0.5,`hsla(${s.hue},100%,70%,${s.a*0.4})`);
      g.addColorStop(1,`hsla(${s.hue},100%,60%,0)`);
      ctxS.fillStyle=g;
      ctxS.beginPath(); ctxS.arc(s.x,s.y,s.r*2.5,0,Math.PI*2); ctxS.fill();
    });
    requestAnimationFrame(animStars);
  }
  animStars();

  // -- Data Particles Canvas --
  const cp = document.getElementById('gz-particles');
  if(!cp) return;
  const ctxP = cp.getContext('2d');
  function resizeP(){ cp.width=window.innerWidth; cp.height=window.innerHeight; }
  resizeP();
  const parts = [];
  const NP = isMobile ? 8 : 18;
  for(let i=0;i<NP;i++){
    parts.push({
      x:0, y:0,
      r: Math.random()*2.5+1,
      cx: Math.random()*cp.width, cy: Math.random()*cp.height,
      rx: Math.random()*120+40, ry: Math.random()*120+40,
      angle: Math.random()*Math.PI*2,
      speed: Math.random()*0.008+0.004,
      pulse: Math.random()*Math.PI*2, ps: Math.random()*0.02+0.01,
      color: [[24,119,242],[0,212,255],[139,92,246],[6,182,212]][Math.floor(Math.random()*4)]
    });
  }
  function animParts(){
    ctxP.clearRect(0,0,cp.width,cp.height);
    parts.forEach(p=>{
      p.angle+=p.speed;
      p.x=p.cx+Math.cos(p.angle)*p.rx;
      p.y=p.cy+Math.sin(p.angle)*p.ry;
      p.pulse+=p.ps;
      const ps=1+Math.sin(p.pulse)*0.5;
      const [r,g,b]=p.color;
      const grd=ctxP.createRadialGradient(p.x,p.y,0,p.x,p.y,p.r*ps*4);
      grd.addColorStop(0,`rgba(${r},${g},${b},${0.75*ps})`);
      grd.addColorStop(0.4,`rgba(${r},${g},${b},${0.3*ps})`);
      grd.addColorStop(1,`rgba(${r},${g},${b},0)`);
      ctxP.fillStyle=grd;
      ctxP.beginPath(); ctxP.arc(p.x,p.y,p.r*ps*4,0,Math.PI*2); ctxP.fill();
    });
    requestAnimationFrame(animParts);
  }
  animParts();

  // -- Custom Cursor --
  const cur=document.getElementById('custom-cursor');
  if(cur && !('ontouchstart' in window)){
    let mx=0,my=0,cx=0,cy=0,shown=false;
    document.body.style.cursor='none';
    document.addEventListener('mousemove',e=>{
      mx=e.clientX; my=e.clientY;
      if(!shown){ shown=true; cur.style.opacity='1'; }
    });
    document.addEventListener('mouseleave',()=>{ shown=false; cur.style.opacity='0'; });
    function animCur(){ if(shown){ cx+=(mx-cx)*0.15; cy+=(my-cy)*0.15; cur.style.left=cx+'px'; cur.style.top=cy+'px'; } requestAnimationFrame(animCur); }
    animCur();
  }

  // -- Resize handler --
  window.addEventListener('resize',()=>{ resizeS(); resizeP(); });
})();
</script>
  <script src="js/auth-common.js"></script>
</body>
</html>
