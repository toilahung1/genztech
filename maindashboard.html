<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard — GenzTech</title>
  <link rel="stylesheet" href="css/main.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <style>
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:'Inter',system-ui,sans-serif;background:#080c1e;color:#fff;display:flex;min-height:100vh;overflow-x:hidden}
    .sidebar{width:240px;flex-shrink:0;background:rgba(10,14,39,.92);backdrop-filter:blur(20px);border-right:1px solid rgba(255,255,255,.06);display:flex;flex-direction:column;position:fixed;top:0;left:0;bottom:0;z-index:40}
    .sidebar-logo{padding:18px 18px 14px;border-bottom:1px solid rgba(255,255,255,.06);display:flex;align-items:center;gap:10px;text-decoration:none}
    .sidebar-logo img{width:34px;height:34px;border-radius:50%}
    .sidebar-logo span{font-size:14px;font-weight:700;letter-spacing:.5px;color:#fff}
    .sidebar-logo span em{color:#00d4ff;font-style:normal}
    .sidebar-nav{flex:1;padding:10px 0;overflow-y:auto}
    .nav-group-label{font-size:10px;font-weight:700;color:rgba(255,255,255,.25);text-transform:uppercase;letter-spacing:1px;padding:10px 18px 4px}
    .nav-item{display:flex;align-items:center;gap:10px;padding:9px 18px;font-size:13px;color:rgba(255,255,255,.6);text-decoration:none;transition:all .2s;border-left:2px solid transparent;cursor:pointer;background:none;width:100%;text-align:left}
    .nav-item:hover{color:#fff;background:rgba(255,255,255,.04)}
    .nav-item.active{color:#00d4ff;background:rgba(0,212,255,.08);border-left-color:#00d4ff}
    .nav-item i{width:17px;text-align:center;font-size:14px}
    .nav-sub-item{display:flex;align-items:center;gap:10px;padding:7px 18px 7px 40px;font-size:12.5px;color:rgba(255,255,255,.5);text-decoration:none;transition:all .2s;border-left:2px solid transparent;width:100%;box-sizing:border-box}
    .nav-sub-item:hover{color:#fff;background:rgba(255,255,255,.04)}
    .nav-sub-item.active{color:#00d4ff;background:rgba(0,212,255,.06);border-left-color:#00d4ff}
    .nav-sub-item i{width:15px;text-align:center;font-size:13px}
    .sidebar-footer{padding:14px 18px;border-top:1px solid rgba(255,255,255,.06)}
    .conn-status{display:flex;align-items:center;gap:8px;font-size:12px;color:rgba(255,255,255,.4)}
    .conn-dot{width:8px;height:8px;border-radius:50%;background:#6b7280}
    .conn-dot.connected{background:#22c55e;box-shadow:0 0 6px rgba(34,197,94,.5)}
    .main-content{margin-left:240px;flex:1;display:flex;flex-direction:column;min-height:100vh}
    .topbar{height:56px;border-bottom:1px solid rgba(255,255,255,.06);display:flex;align-items:center;justify-content:space-between;padding:0 24px;background:rgba(8,12,30,.8);backdrop-filter:blur(10px);position:sticky;top:0;z-index:30}
    .topbar-left{display:flex;align-items:center;gap:12px}
    .topbar-right{display:flex;align-items:center;gap:8px}
    .page-body{padding:24px;flex:1}
    .page-title{font-size:22px;font-weight:800;margin-bottom:4px;letter-spacing:-.3px}
    .page-subtitle{font-size:13px;color:rgba(255,255,255,.4);margin-bottom:24px}
    .btn-icon{width:34px;height:34px;border-radius:8px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.1);color:rgba(255,255,255,.7);cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:14px;transition:all .2s}
    .btn-icon:hover{background:rgba(255,255,255,.1);color:#fff}
    .card{background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);border-radius:14px;overflow:hidden;margin-bottom:16px}
    .card-header{display:flex;align-items:center;justify-content:space-between;padding:14px 18px;border-bottom:1px solid rgba(255,255,255,.06)}
    .card-title{font-size:14px;font-weight:700;display:flex;align-items:center;gap:8px}
    .card-body{padding:18px}
    .stats-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:14px;margin-bottom:24px}
    .stat-card{background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);border-radius:12px;padding:16px 18px;transition:all .2s;cursor:pointer;text-decoration:none;display:block}
    .stat-card:hover{background:rgba(255,255,255,.07);border-color:rgba(255,255,255,.15);transform:translateY(-2px)}
    .stat-icon{width:38px;height:38px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:18px;margin-bottom:12px}
    .stat-label{font-size:11px;color:rgba(255,255,255,.4);text-transform:uppercase;letter-spacing:.7px;margin-bottom:4px}
    .stat-value{font-size:22px;font-weight:800;margin-bottom:2px}
    .stat-sub{font-size:11.5px;color:rgba(255,255,255,.35)}
    .tools-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:14px;margin-bottom:24px}
    .tool-card{background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);border-radius:14px;padding:20px;transition:all .25s;text-decoration:none;display:block;position:relative;overflow:hidden}
    .tool-card:hover{transform:translateY(-3px);border-color:rgba(255,255,255,.18);background:rgba(255,255,255,.07)}
    .tool-icon{width:44px;height:44px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:20px;margin-bottom:14px}
    .tool-icon.blue{background:rgba(24,119,242,.15);color:#60a5fa}
    .tool-icon.cyan{background:rgba(0,212,255,.12);color:#00d4ff}
    .tool-icon.green{background:rgba(34,197,94,.12);color:#4ade80}
    .tool-icon.purple{background:rgba(139,92,246,.12);color:#a78bfa}
    .tool-icon.orange{background:rgba(249,115,22,.12);color:#fb923c}
    .tool-icon.pink{background:rgba(236,72,153,.12);color:#f472b6}
    .tool-icon.yellow{background:rgba(234,179,8,.12);color:#fbbf24}
    .tool-name{font-size:14px;font-weight:700;margin-bottom:6px}
    .tool-desc{font-size:12.5px;color:rgba(255,255,255,.45);line-height:1.6;margin-bottom:14px}
    .tool-badge{display:inline-flex;align-items:center;gap:4px;padding:3px 8px;border-radius:5px;font-size:10.5px;font-weight:700}
    .badge-live{background:rgba(34,197,94,.12);color:#4ade80}
    .badge-new{background:rgba(0,212,255,.12);color:#00d4ff}
    .badge-soon{background:rgba(107,114,128,.12);color:#9ca3af}
    .quick-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:10px;margin-bottom:24px}
    .quick-btn{background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);border-radius:10px;padding:14px;text-align:center;cursor:pointer;transition:all .2s;text-decoration:none;display:block}
    .quick-btn:hover{background:rgba(255,255,255,.08);transform:translateY(-1px)}
    .quick-btn i{font-size:22px;display:block;margin-bottom:6px}
    .quick-btn span{font-size:12px;color:rgba(255,255,255,.6)}
    .activity-item{display:flex;align-items:flex-start;gap:12px;padding:10px 0;border-bottom:1px solid rgba(255,255,255,.05)}
    .activity-item:last-child{border-bottom:none}
    .activity-dot{width:8px;height:8px;border-radius:50%;margin-top:5px;flex-shrink:0}
    .activity-text{font-size:13px;color:rgba(255,255,255,.7);line-height:1.5}
    .activity-time{font-size:11px;color:rgba(255,255,255,.3);margin-top:2px}
    .bg-canvas{position:fixed;inset:0;pointer-events:none;z-index:0}
    #toast{position:fixed;bottom:24px;right:24px;z-index:9999;display:flex;flex-direction:column;gap:8px}
    .toast-item{background:#1e2a4a;border:1px solid rgba(255,255,255,.1);border-radius:10px;padding:12px 18px;font-size:13px;display:flex;align-items:center;gap:10px;animation:slideIn .3s ease;min-width:260px}
    .toast-item.success{border-left:3px solid #22c55e}
    .toast-item.error{border-left:3px solid #ef4444}
    .toast-item.info{border-left:3px solid #00d4ff}
    @keyframes slideIn{from{opacity:0;transform:translateX(20px)}to{opacity:1;transform:translateX(0)}}
    @media(max-width:768px){.sidebar{display:none}.main-content{margin-left:0}.stats-grid{grid-template-columns:repeat(2,1fr)}.tools-grid{grid-template-columns:1fr}.quick-grid{grid-template-columns:repeat(2,1fr)}}
  
    /* ── Universe Background ── */
    canvas.bg-canvas{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:0}
    #custom-cursor{position:fixed;width:20px;height:20px;border-radius:50%;border:2px solid rgba(0,212,255,.8);pointer-events:none;z-index:9999;transform:translate(-50%,-50%);transition:opacity .3s;opacity:0;mix-blend-mode:screen}
    .nebula-overlay{position:fixed;inset:0;pointer-events:none;z-index:0;background:radial-gradient(ellipse 80% 60% at 20% 30%,rgba(24,119,242,.07) 0%,transparent 60%),radial-gradient(ellipse 60% 50% at 80% 70%,rgba(0,212,255,.06) 0%,transparent 55%),radial-gradient(ellipse 50% 40% at 50% 10%,rgba(139,92,246,.05) 0%,transparent 50%)}
  </style>
</head>
<body>
  <!-- Universe Background -->
  <canvas class="bg-canvas" id="gz-stars"></canvas>
  <canvas class="bg-canvas" id="gz-particles"></canvas>
  <div class="nebula-overlay"></div>
  <div id="custom-cursor"></div>
  <div id="toast"></div>

  <div style="display:flex;min-height:100vh;position:relative;z-index:1">
    <!-- Sidebar -->
    <aside class="sidebar">
      <a href="index.html" class="sidebar-logo">
        <img src="https://ui-avatars.com/api/?name=GZ&background=1877f2&color=fff&bold=true" alt="logo">
        <span>GENZ<em>TECH</em></span>
      </a>
      <nav class="sidebar-nav">
        <div class="nav-group-label">Tổng Quan</div>
        <a href="maindashboard.html" class="nav-item active"><i class="bi bi-grid-1x2-fill"></i> Dashboard</a>
        <div class="nav-group-label">Công Cụ</div>
        <a href="auto-post.html" class="nav-item"><i class="bi bi-send"></i> Tự Động Đăng Bài</a>
        <a href="ads-assistant.html" class="nav-item" onclick="toggleSubNav(event,'subNavAds')">
          <i class="bi bi-megaphone"></i> Trợ Lý Quảng Cáo
          <i class="bi bi-chevron-down" id="subNavAdsArrow" style="margin-left:auto;font-size:11px;transition:transform .2s"></i>
        </a>
        <div id="subNavAds" style="display:flex;flex-direction:column">
          <a href="tool-ad-account.html" class="nav-sub-item"><i class="bi bi-shield-check"></i> Kiểm Tra TKQC</a>
          <a href="tool-fb-id.html" class="nav-sub-item"><i class="bi bi-person-badge"></i> Tìm Facebook ID</a>
          <a href="tool-budget.html" class="nav-sub-item"><i class="bi bi-graph-up-arrow"></i> Phân Tích Ngân Sách</a>
          <a href="tool-translate.html" class="nav-sub-item"><i class="bi bi-translate"></i> Dịch Thuật</a>
          <a href="tool-ads-finder.html" class="nav-sub-item"><i class="bi bi-binoculars"></i> Ads Finder</a>
          <a href="tool-policy.html" class="nav-sub-item"><i class="bi bi-journal-text"></i> Chính Sách FB</a>
          <a href="tool-cookie.html" class="nav-sub-item"><i class="bi bi-cookie"></i> Quản Lý Cookie</a>
        </div>
        <a href="#" class="nav-item" onclick="openSettings()"><i class="bi bi-gear"></i> Cài Đặt</a>
      </nav>
      <div class="sidebar-footer">
        <div class="conn-status">
          <div class="conn-dot" id="connDot"></div>
          <span id="connText">Chưa kết nối</span>
        </div>
      </div>
    </aside>

    <!-- Main -->
    <div class="main-content">
      <div class="topbar">
        <div class="topbar-left">
          <span style="font-size:12.5px;color:rgba(255,255,255,.4);display:flex;align-items:center;gap:6px">
            <i class="bi bi-grid-1x2-fill" style="color:#00d4ff"></i> Dashboard
          </span>
        </div>
        <div class="topbar-right">
          <div id="userBadge" style="display:none;align-items:center;gap:8px;font-size:12.5px">
            <img id="userAvatar" style="width:28px;height:28px;border-radius:50%;border:2px solid rgba(0,212,255,.3)" src="" alt="">
            <span id="userName" style="color:rgba(255,255,255,.7)"></span>
          </div>
          <button class="btn-icon" onclick="handleFBLogin()" title="Kết nối Facebook"><i class="bi bi-facebook" style="color:#1877f2"></i></button>
        </div>
      </div>

      <main class="page-body">
        <h1 class="page-title"><i class="bi bi-grid-1x2-fill" style="color:#00d4ff;margin-right:8px"></i>Dashboard</h1>
        <p class="page-subtitle">Tổng quan hệ thống GenzTech — Tất cả công cụ quảng cáo Facebook trong một nơi</p>

        <!-- Quick actions -->
        <div class="quick-grid">
          <a href="tool-ad-account.html" class="quick-btn">
            <i class="bi bi-shield-check" style="color:#60a5fa"></i>
            <span>Kiểm Tra TKQC</span>
          </a>
          <a href="tool-budget.html" class="quick-btn">
            <i class="bi bi-graph-up-arrow" style="color:#4ade80"></i>
            <span>Phân Tích Ngân Sách</span>
          </a>
          <a href="tool-policy.html" class="quick-btn">
            <i class="bi bi-journal-text" style="color:#fbbf24"></i>
            <span>Chính Sách FB</span>
          </a>
          <a href="auto-post.html" class="quick-btn">
            <i class="bi bi-send" style="color:#a78bfa"></i>
            <span>Đăng Bài Tự Động</span>
          </a>
        </div>

        <!-- Stats -->
        <div class="stats-grid">
          <a href="tool-ad-account.html" class="stat-card">
            <div class="stat-icon" style="background:rgba(24,119,242,.12);color:#60a5fa"><i class="bi bi-shield-check"></i></div>
            <div class="stat-label">TKQC đã kiểm tra</div>
            <div class="stat-value" id="statAccounts">--</div>
            <div class="stat-sub">Tài khoản quảng cáo</div>
          </a>
          <a href="tool-budget.html" class="stat-card">
            <div class="stat-icon" style="background:rgba(34,197,94,.12);color:#4ade80"><i class="bi bi-graph-up-arrow"></i></div>
            <div class="stat-label">Phân tích ngân sách</div>
            <div class="stat-value" id="statBudget">--</div>
            <div class="stat-sub">Chiến dịch đã phân tích</div>
          </a>
          <a href="tool-fb-id.html" class="stat-card">
            <div class="stat-icon" style="background:rgba(0,212,255,.12);color:#00d4ff"><i class="bi bi-person-badge"></i></div>
            <div class="stat-label">Facebook ID đã tìm</div>
            <div class="stat-value" id="statFbId">--</div>
            <div class="stat-sub">Từ lịch sử tra cứu</div>
          </a>
          <a href="tool-policy.html" class="stat-card">
            <div class="stat-icon" style="background:rgba(251,191,36,.12);color:#fbbf24"><i class="bi bi-journal-text"></i></div>
            <div class="stat-label">Kiểm tra chính sách</div>
            <div class="stat-value" id="statPolicy">--</div>
            <div class="stat-sub">Nội dung đã kiểm tra</div>
          </a>
        </div>

        <!-- Tools grid -->
        <div class="card">
          <div class="card-header">
            <div class="card-title"><i class="bi bi-grid" style="color:#00d4ff"></i> Tất Cả Công Cụ</div>
          </div>
          <div class="card-body">
            <div class="tools-grid">
              <a href="tool-ad-account.html" class="tool-card">
                <div class="tool-icon blue"><i class="bi bi-shield-check"></i></div>
                <div class="tool-name">Kiểm Tra TKQC</div>
                <div class="tool-desc">Kiểm tra trạng thái, múi giờ, giới hạn chi tiêu và rủi ro tài khoản quảng cáo Facebook.</div>
                <span class="tool-badge badge-live"><i class="bi bi-circle-fill" style="font-size:7px"></i> Live</span>
              </a>
              <a href="tool-fb-id.html" class="tool-card">
                <div class="tool-icon cyan"><i class="bi bi-person-badge"></i></div>
                <div class="tool-name">Tìm Facebook ID</div>
                <div class="tool-desc">Tra cứu Facebook ID từ link profile, fanpage, group. Hỗ trợ tra cứu hàng loạt và xuất CSV.</div>
                <span class="tool-badge badge-live"><i class="bi bi-circle-fill" style="font-size:7px"></i> Live</span>
              </a>
              <a href="tool-budget.html" class="tool-card">
                <div class="tool-icon green"><i class="bi bi-graph-up-arrow"></i></div>
                <div class="tool-name">Phân Tích Ngân Sách</div>
                <div class="tool-desc">AI phân tích hiệu suất quảng cáo, dự báo 3 tháng, so sánh đối thủ và đề xuất tối ưu.</div>
                <span class="tool-badge badge-new"><i class="bi bi-stars"></i> AI</span>
              </a>
              <a href="tool-translate.html" class="tool-card">
                <div class="tool-icon purple"><i class="bi bi-translate"></i></div>
                <div class="tool-name">Dịch Thuật Quảng Cáo</div>
                <div class="tool-desc">Dịch nội dung quảng cáo sang nhiều ngôn ngữ, tối ưu cho từng thị trường mục tiêu.</div>
                <span class="tool-badge badge-live"><i class="bi bi-circle-fill" style="font-size:7px"></i> Live</span>
              </a>
              <a href="tool-ads-finder.html" class="tool-card">
                <div class="tool-icon orange"><i class="bi bi-binoculars"></i></div>
                <div class="tool-name">Ads Finder</div>
                <div class="tool-desc">Tìm kiếm và phân tích quảng cáo đối thủ trên Facebook Ads Library theo từ khóa, ngành.</div>
                <span class="tool-badge badge-live"><i class="bi bi-circle-fill" style="font-size:7px"></i> Live</span>
              </a>
              <a href="tool-policy.html" class="tool-card">
                <div class="tool-icon yellow"><i class="bi bi-journal-text"></i></div>
                <div class="tool-name">Chính Sách Facebook</div>
                <div class="tool-desc">AI kiểm tra vi phạm nội dung và hình ảnh quảng cáo theo chính sách Meta mới nhất.</div>
                <span class="tool-badge badge-new"><i class="bi bi-stars"></i> AI</span>
              </a>
              <a href="tool-cookie.html" class="tool-card">
                <div class="tool-icon pink"><i class="bi bi-cookie"></i></div>
                <div class="tool-name">Quản Lý Cookie</div>
                <div class="tool-desc">Quản lý và kiểm tra cookie Facebook, hỗ trợ xác thực và duy trì phiên đăng nhập.</div>
                <span class="tool-badge badge-live"><i class="bi bi-circle-fill" style="font-size:7px"></i> Live</span>
              </a>
              <a href="auto-post.html" class="tool-card">
                <div class="tool-icon blue"><i class="bi bi-send"></i></div>
                <div class="tool-name">Tự Động Đăng Bài</div>
                <div class="tool-desc">Lên lịch và tự động đăng bài lên Facebook Page, tối ưu thời gian đăng cho tương tác cao nhất.</div>
                <span class="tool-badge badge-live"><i class="bi bi-circle-fill" style="font-size:7px"></i> Live</span>
              </a>
              <a href="ads-assistant.html" class="tool-card">
                <div class="tool-icon cyan"><i class="bi bi-megaphone"></i></div>
                <div class="tool-name">Trợ Lý Quảng Cáo</div>
                <div class="tool-desc">Trợ lý AI hỗ trợ tạo nội dung quảng cáo, viết copy, tối ưu targeting và chiến lược.</div>
                <span class="tool-badge badge-new"><i class="bi bi-stars"></i> AI</span>
              </a>
            </div>
          </div>
        </div>

        <!-- Activity & Tips -->
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:16px">
          <div class="card">
            <div class="card-header">
              <div class="card-title"><i class="bi bi-clock-history" style="color:#00d4ff"></i> Hoạt Động Gần Đây</div>
            </div>
            <div class="card-body" id="activityFeed">
              <div style="text-align:center;padding:20px;color:rgba(255,255,255,.25);font-size:13px">
                <i class="bi bi-inbox" style="font-size:28px;display:block;margin-bottom:8px;opacity:.3"></i>
                Chưa có hoạt động nào
              </div>
            </div>
          </div>
          <div class="card">
            <div class="card-header">
              <div class="card-title"><i class="bi bi-lightbulb" style="color:#fbbf24"></i> Mẹo Hôm Nay</div>
            </div>
            <div class="card-body">
              <div style="font-size:13px;line-height:1.7;color:rgba(255,255,255,.6)" id="tipContent">Đang tải...</div>
            </div>
          </div>
        </div>
      </main>
    </div>
  </div>

  

<script id="gz-universe-bg">
(function(){
  'use strict';
  const isMobile = /Mobi|Android/i.test(navigator.userAgent);

  // ── Stars Canvas ──
  const cs = document.getElementById('gz-stars');
  if (!cs) return;
  const ctxS = cs.getContext('2d');
  function resizeS(){ cs.width=window.innerWidth; cs.height=window.innerHeight; }
  resizeS();
  const stars = [];
  const N = isMobile ? 80 : 180;
  for(let i=0;i<N;i++){
    stars.push({
      x: Math.random()*cs.width, y: Math.random()*cs.height,
      r: Math.random()*1.6+0.2,
      a: Math.random(), da: (Math.random()-0.5)*0.004,
      vx: (Math.random()-0.5)*0.07, vy: (Math.random()-0.5)*0.07,
      hue: [210,195,270,180][Math.floor(Math.random()*4)] // xanh dương, cyan, tím, xanh lá
    });
  }
  function animStars(){
    ctxS.clearRect(0,0,cs.width,cs.height);
    stars.forEach(s=>{
      s.x+=s.vx; s.y+=s.vy; s.a+=s.da;
      if(s.a<0.08) s.da=Math.abs(s.da);
      if(s.a>0.95) s.da=-Math.abs(s.da);
      if(s.x<0) s.x=cs.width; if(s.x>cs.width) s.x=0;
      if(s.y<0) s.y=cs.height; if(s.y>cs.height) s.y=0;
      const g=ctxS.createRadialGradient(s.x,s.y,0,s.x,s.y,s.r*2.5);
      g.addColorStop(0,`hsla(${s.hue},100%,90%,${s.a*0.9})`);
      g.addColorStop(0.5,`hsla(${s.hue},100%,70%,${s.a*0.4})`);
      g.addColorStop(1,`hsla(${s.hue},100%,60%,0)`);
      ctxS.fillStyle=g;
      ctxS.beginPath(); ctxS.arc(s.x,s.y,s.r*2.5,0,Math.PI*2); ctxS.fill();
    });
    requestAnimationFrame(animStars);
  }
  animStars();

  // ── Data Particles Canvas ──
  const cp = document.getElementById('gz-particles');
  if(!cp) return;
  const ctxP = cp.getContext('2d');
  function resizeP(){ cp.width=window.innerWidth; cp.height=window.innerHeight; }
  resizeP();
  const parts = [];
  const NP = isMobile ? 8 : 18;
  for(let i=0;i<NP;i++){
    parts.push({
      x:0, y:0,
      r: Math.random()*2.5+1,
      cx: Math.random()*cp.width, cy: Math.random()*cp.height,
      rx: Math.random()*120+40, ry: Math.random()*120+40,
      angle: Math.random()*Math.PI*2,
      speed: Math.random()*0.008+0.004,
      pulse: Math.random()*Math.PI*2, ps: Math.random()*0.02+0.01,
      color: [[24,119,242],[0,212,255],[139,92,246],[6,182,212]][Math.floor(Math.random()*4)]
    });
  }
  function animParts(){
    ctxP.clearRect(0,0,cp.width,cp.height);
    parts.forEach(p=>{
      p.angle+=p.speed;
      p.x=p.cx+Math.cos(p.angle)*p.rx;
      p.y=p.cy+Math.sin(p.angle)*p.ry;
      p.pulse+=p.ps;
      const ps=1+Math.sin(p.pulse)*0.5;
      const [r,g,b]=p.color;
      const grd=ctxP.createRadialGradient(p.x,p.y,0,p.x,p.y,p.r*ps*4);
      grd.addColorStop(0,`rgba(${r},${g},${b},${0.75*ps})`);
      grd.addColorStop(0.4,`rgba(${r},${g},${b},${0.3*ps})`);
      grd.addColorStop(1,`rgba(${r},${g},${b},0)`);
      ctxP.fillStyle=grd;
      ctxP.beginPath(); ctxP.arc(p.x,p.y,p.r*ps*4,0,Math.PI*2); ctxP.fill();
    });
    requestAnimationFrame(animParts);
  }
  animParts();

  // ── Custom Cursor ──
  const cur=document.getElementById('custom-cursor');
  if(cur && !('ontouchstart' in window)){
    let mx=0,my=0,cx=0,cy=0,shown=false;
    document.body.style.cursor='none';
    document.addEventListener('mousemove',e=>{
      mx=e.clientX; my=e.clientY;
      if(!shown){ shown=true; cur.style.opacity='1'; }
    });
    document.addEventListener('mouseleave',()=>{ shown=false; cur.style.opacity='0'; });
    function animCur(){ if(shown){ cx+=(mx-cx)*0.15; cy+=(my-cy)*0.15; cur.style.left=cx+'px'; cur.style.top=cy+'px'; } requestAnimationFrame(animCur); }
    animCur();
  }

  // ── Resize handler ──
  window.addEventListener('resize',()=>{ resizeS(); resizeP(); });
})();
</script>
</body>
</html>
